<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no">
    <script type="module" src="cmp/base.js"></script>
    <script type="module" src="cmp/mi-presentacion.js"></script>
    <link rel="stylesheet" href="css/estilos.css">
    <link rel="stylesheet" href="css/presentacion.css">
    <script type="module">
      import { SelDiapositivaBase } from "./lib/SelDiapositivaBase.js";
      customElements.define("mi-selector", class extends SelDiapositivaBase {
        /** @override
         * @returns {string} */
        get html() {
          return (/* html */
            `<select>
              <option value=intro>Bases de Datos</option>
              <option value=Clases>Diagrama de Clases</option>
              <option value=Datos>Diseño de Datos</option>
              <option value=Ejemplo>Datos de Ejemplo</option>
              <option value=Instrucciones>Instrucciones</option>
              <option value=Archivos>Archivos</option>
              <option value=Footer>Footer</option>
              <option value=Navegacion>Navegación</option>
              <option value=Autenticacion>Autenticación</option>
              <option value=Consulta>Consulta</option>
              <option value=Alta>Alta</option>
              <option value=Cambios>Cambios y Bajas</option>
              <option value=Join>Join</option>
              <option value=Alta_Foraneas>Alta con Foráneas</option>
              <option value=Cambios_Foraneas>Cambios y Bajas con Foráneas</option>
            </select>`);
        }
      });
    </script>
  </head>
  <body>
    <div class="cortina"></div>
    <mi-menu></mi-menu>
    <mi-presentacion class="desplaza">
      <mi-selector slot=selector></mi-selector>
      <div id=intro slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h1></h1>
      </div>
      <section id=Clases slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
          <figure>
            <img class="dc" src="img/clases_bd.svg"
              alt="Diagrama de clases de la Base de Datos">
          </figure>
          <h3>Diagrama Entidad Relación</h3>
          <figure>
            <img class="dc" src="img/entidad_relacion.svg"
              alt="Diagrama de Entidad Relación de la Base de Datos">
          </figure>
          <h3>Frases</h3>
          <p>Un usuario <em>practica</em> <strong>un pasatiempo</strong>.</p>
          <p>
            Una pasatiempo es <em>practicado</em> por
            <strong>muchos usuarios</strong>.
          </p>
          <p>
            A un usuario se <em>asignan</em>
            <strong>muchos priviegios</strong>.</p>
          <p>Un privilegio es <em>asignado</em> a
            <strong>muchos usuarios</strong>.
          </p>
        </div>
      </section>
      <section id=Datos slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
          <p>
            La base de datos es Firestore de Firebase. Las entidades se
            almacenan en <dfn>colecciones</dfn>, que consisten en una lista de
            identificadores que tienen asociados documentos. Cada
            <dfn>documento</dfn> contiene propiedades que tienen un nombre y
            llevan asociado un valor.
          </p>
          <p>
            Los archivos se cargan en el servicio de Storage, donde se usará el
            id de usuario como nombre del archivo para simplificar el código.
          </p>
          <p>
            Para la asociaciones a 1 (1-1 o M-1) se usa el id del objeto
            relacionado. En este caso, el campo PAS_ID de USUARIO hace
            referencia al id de PASATIEMPO.
          </p>
          <p>
            Para la asociaciones a muchos (1-M o M-N) se usa un arreglo con los
            id de los objetos relacionados. En este caso, el campo
            PRIVILEGIO_IDS de USUARIO hace referencia a algunos id de
            PRIVILEGIO.
          </p>
          <p>
            Como la aplicación usa email creados externamente, este campo no se
            usa como llave, permitiendo que el usuario pueda cambiar de cuenta.
          </p>
          <p>El identificadores PASATIEMPO se genera automáticamente.</p>
          <p>
            La colección PASATIEMPO se procesa más fácilmente si el id es el
            email.
          </p>
          <p>
            Los datos de PRIVILEGIO son usados directamente en el código. El
            desarrollador asigna los identificadores y llena los datos
            directamente en la base de datos desde el inicio.
          </p>
          <figure>
            <img class="dc" src="img/no_sql.svg"
              alt="Diseño No SQL de la Base de Datos">
          </figure>
        </div>
      </section>
      <section id=Ejemplo slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
          <h3>Firestore</h3>
          <dl class="datos">
            <dt><strong>PRIVILEGIO</strong></dt>
            <dd>
              <dl>
                <dt>(id) Pasatiempos</dt>
                <dd>
                  <table>
                    <tr>
                      <th>Propiedad</th>
                      <th>Tipo</th>
                      <th>Valor</th>
                    </tr>
                    <tr>
                      <td>PRIV_DESCRIPCION</td>
                      <td>string</td>
                      <td>
                        El usuario puede acceder a la vista
                        <q>Pasatiempos</q>.
                      </td>
                    </tr>
                  </table>
                </dd>
                <dt>(id) Usuarios</dt>
                <dd>
                  <table>
                    <tr>
                      <th>Propiedad</th>
                      <th>Tipo</th>
                      <th>Valor</th>
                    </tr>
                    <tr>
                      <td>PRIV_DESCRIPCION</td>
                      <td>string</td>
                      <td>
                        El usuario puede acceder a la vista
                        <q>Usuarios</q>.
                      </td>
                    </tr>
                  </table>
                </dd>
              </dl>
            </dd>
            <dt><strong>PASATIEMPO</strong></dt>
            <dd>
              <dl>
                <dt>(id automático) NXY-MNY-PXQ1</dt>
                <dd>
                  <table>
                    <tr>
                      <th>Propiedad</th>
                      <th>Tipo</th>
                      <th>Valor</th>
                    </tr>
                    <tr>
                      <td>PAS_NOMBRE</td>
                      <td>string</td>
                      <td>Futbol</td>
                    </tr>
                  </table>
                </dd>
                <dt>(id automático) PHX-DGC-AI66</dt>
                <dd>
                  <table>
                    <tr>
                      <th>Propiedad</th>
                      <th>Tipo</th>
                      <th>Valor</th>
                    </tr>
                    <tr>
                      <td>PAS_NOMBRE</td>
                      <td>string</td>
                      <td>Estudiar</td>
                    </tr>
                  </table>
                </dd>
              </dl>
            </dd>
            <dt><strong>USUARIO</strong></dt>
            <dd>
              <dl>
                <dt>(id) pp@gm.com</dt>
                <dd>
                  <table>
                    <tr>
                      <th>Propiedad</th>
                      <th>Tipo</th>
                      <th>Valor</th>
                    </tr>
                    <tr>
                      <td>PAS_ID</td>
                      <td>string</td>
                      <td>PHX-DGC-AI66 (apunta a PASATIEMPO)</td>
                    </tr>
                    <tr>
                      <td>PRIVILEGIO_IDS</td>
                      <td>arreglo</td>
                      <td>
                        <ol start="0">
                          <li>Pasatiempos (apunta a PRIVILEGIO)</li>
                          <li>Usuarios (apunta a PRIVILEGIO)</li>
                        </ol>
                      </td>
                    </tr>
                  </table>
                </dd>
              </dl>
            </dd>
          </dl>
          <h3>Storage</h3>
          <p>
            El servicio de Storage almacena archivos por su nombre y va separado
            de los datos.
          </p>
          <table>
            <tr>
              <th>Nombre</th>
              <th>Datos</th>
            </tr>
            <tr>
              <td>pp@gm.com (apunta a USUARIO)</td>
              <td>
                <figure>
                  <img
                    src="https://media.giphy.com/media/KzysaM2kn6oeM4Nx3Y/giphy.gif"
                    alt="Avatar de pp">
                </figure>
              </td>
            </tr>
          </table>
        </div>
      </section>
      <section id=Instrucciones slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
          <ol>
            <li>
              <p>
                Crea una cuenta de Google con el nombre de tu aplicación de base
                de datos.
              </p>
            </li>
            <li>
              <p>
                <a href="https://web.microsoftstream.com/video/ca9eaa42-1865-4de4-8aa4-7972a170dbbf"
                  target="_blank">Crea los íconos del proyecto con GIMP.</a>
              </p>
            </li>
            <li>
              <p>
                <a href="https://web.microsoftstream.com/video/cababed9-723e-4ba6-a07d-973de4ab5b1d"
                  target="_blank">Crea una página con GitHub usando tu cuenta de
                   Google.</a>
              </p>
            </li>
            <li>
              <p>
                <a href="https://web.microsoftstream.com/video/0237a0e5-3812-4fa3-94bf-c526724241de"
                  target="_blank">Clona tu proyecto desde Visual Studio Code
                  para trabajar desde tu PC.</a>
              </p>
            </li>
            <li>
              <p>
                <a href="https://web.microsoftstream.com/video/1a324af1-b026-4b38-a050-9f053223648e"
                  target="_blank">Crear un proyecto de Firebase con el mismo
                  correo que la cuenta de GitHub.</a>
              </p>
            </li>
            <li>
              <p>
                <a href="https://web.microsoftstream.com/video/607ada67-a975-4d30-8327-4c96773a2da5"
                  target="_blank">Configura Authorization, Storage y Firestore en tu proyecto
                  de Firebase y añade datos.</a>
              </p>
            </li>
            <li>
              <p>
                Edita el código, utilizando las diapositivas que siguen después
                de esta y pruébalo.
              </p>
            </li>
          </ol>
        </div>
      </section>
      <section id=Archivos slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
        </div>
      </section>
      <section id=Footer slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
        </div>
      </section>
      <section id=Navegacion slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
        </div>
      </section>
      <section id=Autenticacion slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
        </div>
      </section>
      <section id=Consulta slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
        </div>
      </section>
      <section id=Alta slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
        </div>
      </section>
      <section id=Cambios slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
        </div>
      </section>
      <section id=Join slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
        </div>
      </section>
      <section id=Alta_Foraneas slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
        </div>
      </section>
      <section id=Cambios_Foraneas slot=diapositiva>
        <div class="cortina"></div>
        <header></header>
        <h2></h2>
        <div class="marco-lectura">
        </div>
      </section>
    </mi-presentacion>
  </body>
  <script type="module" src="lib/comun.js"></script>
</html>