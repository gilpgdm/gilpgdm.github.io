<table class="codeShow">
 <caption style="text-align: left">
  <button type=button title="Copiar al portapapeles"
    onclick="copyToClipboard(this)">
   <span class="material-symbols-outlined">
    content_copy
   </span>
  </button>
 </caption>
 <tbody>
  <tr><td>1</td><td><span class="codeComment">/*******************************************************************************</span></td></tr>
  <tr><td>2</td><td><span class="codeComment"> * Copyright (c) 2013, 2016 IBM Corp.</span></td></tr>
  <tr><td>3</td><td><span class="codeComment"> *</span></td></tr>
  <tr><td>4</td><td><span class="codeComment"> * All rights reserved. This program and the accompanying materials</span></td></tr>
  <tr><td>5</td><td><span class="codeComment"> * are made available under the terms of the Eclipse Public License v1.0</span></td></tr>
  <tr><td>6</td><td><span class="codeComment"> * and Eclipse Distribution License v1.0 which accompany <span class="codeReserved">this</span> distribution.</span></td></tr>
  <tr><td>7</td><td><span class="codeComment"> *</span></td></tr>
  <tr><td>8</td><td><span class="codeComment"> * The Eclipse Public License is available at</span></td></tr>
  <tr><td>9</td><td><span class="codeComment"> *    http:<span class="codeComment">//www.eclipse.org/legal/epl-v10.html</span></span></td></tr>
  <tr><td>10</td><td><span class="codeComment"> * and the Eclipse Distribution License is available at</span></td></tr>
  <tr><td>11</td><td><span class="codeComment"> *   http:<span class="codeComment">//www.eclipse.org/org/documents/edl-v10.php.</span></span></td></tr>
  <tr><td>12</td><td><span class="codeComment"> *</span></td></tr>
  <tr><td>13</td><td><span class="codeComment"> *******************************************************************************/</span></td></tr>
  <tr><td>14</td><td>(<span class="codeReserved">function</span>(p,s){<span class="codeString">&quot;object&quot;</span>===<span class="codeReserved">typeof</span> exports&&<span class="codeString">&quot;object&quot;</span>===<span class="codeReserved">typeof</span> module?module.exports=s():<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>===<span class="codeReserved">typeof</span> define&&define.amd?define(s):<span class="codeString">&quot;object&quot;</span>===<span class="codeReserved">typeof</span> exports?exports=s():(<span class="codeString">&quot;undefined&quot;</span>===<span class="codeReserved">typeof</span> p.Paho&&(p.Paho={}),p.Paho.MQTT=s())})(<span class="codeReserved">this</span>,<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> <span class="codeReserved">function</span>(p){<span class="codeReserved">function</span> s(a,b,c){b[c++]=a&gt;&gt;8;b[c++]=a%256;<span class="codeReserved">return</span> c}<span class="codeReserved">function</span> u(a,b,c,k){k=s(b,c,k);D(a,c,k);<span class="codeReserved">return</span> k+b}<span class="codeReserved">function</span> n(a){<span class="codeReserved">for</span>(var b=0,c=0;c&lt;<span class="codeReserved">a</span>.length;c++){var k=a.charCodeAt(c);2047&lt;<span class="codeReserved">k</span>?(55296&lt;=k&&56319&gt;=k&&(c++,b++),b+=3):127&lt;<span class="codeReserved">k</span>?b+=2:b++}<span class="codeReserved">return</span> b}</td></tr>
  <tr><td>15</td><td><span class="codeReserved">function</span> D(a,b,c){<span class="codeReserved">for</span>(var k=0;k&lt;<span class="codeReserved">a</span>.length;k++){var e=a.charCodeAt(k);<span class="codeReserved">if</span>(55296&lt;=e&&56319&gt;=e){var g=a.charCodeAt(++k);<span class="codeReserved">if</span>(isNaN(g))<span class="codeReserved">throw</span> Error(f(h.MALFORMED_UNICODE,[e,g]));e=(e-55296&lt;&lt;<span class="codeReserved">10</span>)+(g-56320)+65536}127&gt;=e?b[c++]=e:(2047&gt;=e?b[c++]=e&gt;&gt;6&31|192:(65535&gt;=e?b[c++]=e&gt;&gt;12&15|224:(b[c++]=e&gt;&gt;18&7|240,b[c++]=e&gt;&gt;12&63|128),b[c++]=e&gt;&gt;6&63|128),b[c++]=e&63|128)}<span class="codeReserved">return</span> b}<span class="codeReserved">function</span> E(a,b,c){<span class="codeReserved">for</span>(var k=<span class="codeString">&quot;&quot;</span>,e,g=b;g&lt;<span class="codeReserved">b</span>+c;){e=a[g++];<span class="codeReserved">if</span>(!(128&gt;e)){var m=a[g++]-128;<span class="codeReserved">if</span>(0&gt;m)<span class="codeReserved">throw</span> Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),</td></tr>
  <tr><td>16</td><td><span class="codeString">&quot;&quot;</span>]));<span class="codeReserved">if</span>(224&gt;e)e=64*(e-192)+m;<span class="codeReserved">else</span>{var d=a[g++]-128;<span class="codeReserved">if</span>(0&gt;d)<span class="codeReserved">throw</span> Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16)]));<span class="codeReserved">if</span>(240&gt;e)e=4096*(e-224)+64*m+d;<span class="codeReserved">else</span>{var l=a[g++]-128;<span class="codeReserved">if</span>(0&gt;l)<span class="codeReserved">throw</span> Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16),l.toString(16)]));<span class="codeReserved">if</span>(248&gt;e)e=262144*(e-240)+4096*m+64*d+l;<span class="codeReserved">else</span> <span class="codeReserved">throw</span> Error(f(h.MALFORMED_UTF,[e.toString(16),m.toString(16),d.toString(16),l.toString(16)]));}}}65535&lt;<span class="codeReserved">e</span>&&(e-=65536,k+=String.fromCharCode(55296+(e&gt;&gt;10)),e=56320+(e&</td></tr>
  <tr><td>17</td><td>1023));k+=String.fromCharCode(e)}<span class="codeReserved">return</span> k}var z=<span class="codeReserved">function</span>(a,b){<span class="codeReserved">for</span>(var c <span class="codeReserved">in</span> a)<span class="codeReserved">if</span>(a.hasOwnProperty(c))<span class="codeReserved">if</span>(b.hasOwnProperty(c)){<span class="codeReserved">if</span>(<span class="codeReserved">typeof</span> a[c]!==b[c])<span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[<span class="codeReserved">typeof</span> a[c],c]));}<span class="codeReserved">else</span>{c=<span class="codeString">&quot;Unknown property, &quot;</span>+c+<span class="codeString">&quot;. Valid properties are:&quot;</span>;<span class="codeReserved">for</span>(var k <span class="codeReserved">in</span> b)b.hasOwnProperty(k)&&(c=c+<span class="codeString">&quot; &quot;</span>+k);<span class="codeReserved">throw</span> Error(c);}},v=<span class="codeReserved">function</span>(a,b){<span class="codeReserved">return</span> <span class="codeReserved">function</span>(){<span class="codeReserved">return</span> a.apply(b,arguments)}},h={OK:{code:0,text:<span class="codeString">&quot;AMQJSC0000I OK.&quot;</span>},CONNECT_TIMEOUT:{code:1,text:<span class="codeString">&quot;AMQJSC0001E Connect timed out.&quot;</span>},SUBSCRIBE_TIMEOUT:{code:2,</td></tr>
  <tr><td>18</td><td>text:<span class="codeString">&quot;AMQJS0002E Subscribe timed out.&quot;</span>},UNSUBSCRIBE_TIMEOUT:{code:3,text:<span class="codeString">&quot;AMQJS0003E Unsubscribe timed out.&quot;</span>},PING_TIMEOUT:{code:4,text:<span class="codeString">&quot;AMQJS0004E Ping timed out.&quot;</span>},INTERNAL_ERROR:{code:5,text:<span class="codeString">&quot;AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}&quot;</span>},CONNACK_RETURNCODE:{code:6,text:<span class="codeString">&quot;AMQJS0006E Bad Connack <span class="codeReserved">return</span> code:{0} {1}.&quot;</span>},SOCKET_ERROR:{code:7,text:<span class="codeString">&quot;AMQJS0007E Socket error:{0}.&quot;</span>},SOCKET_CLOSE:{code:8,text:<span class="codeString">&quot;AMQJS0008I Socket closed.&quot;</span>},MALFORMED_UTF:{code:9,text:<span class="codeString">&quot;AMQJS0009E Malformed UTF data:{0} {1} {2}.&quot;</span>},</td></tr>
  <tr><td>19</td><td>UNSUPPORTED:{code:10,text:<span class="codeString">&quot;AMQJS0010E {0} is not supported by <span class="codeReserved">this</span> browser.&quot;</span>},INVALID_STATE:{code:11,text:<span class="codeString">&quot;AMQJS0011E Invalid state {0}.&quot;</span>},INVALID_TYPE:{code:12,text:<span class="codeString">&quot;AMQJS0012E Invalid type {0} <span class="codeReserved">for</span> {1}.&quot;</span>},INVALID_ARGUMENT:{code:13,text:<span class="codeString">&quot;AMQJS0013E Invalid argument {0} <span class="codeReserved">for</span> {1}.&quot;</span>},UNSUPPORTED_OPERATION:{code:14,text:<span class="codeString">&quot;AMQJS0014E Unsupported operation.&quot;</span>},INVALID_STORED_DATA:{code:15,text:<span class="codeString">&quot;AMQJS0015E Invalid data <span class="codeReserved">in</span> local storage key\x3d{0} value\x3d{1}.&quot;</span>},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:<span class="codeString">&quot;AMQJS0016E Invalid MQTT message type {0}.&quot;</span>},</td></tr>
  <tr><td>20</td><td>MALFORMED_UNICODE:{code:17,text:<span class="codeString">&quot;AMQJS0017E Malformed Unicode string:{0} {1}.&quot;</span>},BUFFER_FULL:{code:18,text:<span class="codeString">&quot;AMQJS0018E Message buffer is full, maximum buffer size: {0}.&quot;</span>}},H={0:<span class="codeString">&quot;Connection Accepted&quot;</span>,1:<span class="codeString">&quot;Connection Refused: unacceptable protocol version&quot;</span>,2:<span class="codeString">&quot;Connection Refused: identifier rejected&quot;</span>,3:<span class="codeString">&quot;Connection Refused: server unavailable&quot;</span>,4:<span class="codeString">&quot;Connection Refused: bad user name or password&quot;</span>,5:<span class="codeString">&quot;Connection Refused: not authorized&quot;</span>},f=<span class="codeReserved">function</span>(a,b){var c=a.text;<span class="codeReserved">if</span>(b)<span class="codeReserved">for</span>(var k,e,g=0;g&lt;<span class="codeReserved">b</span>.length;g++)<span class="codeReserved">if</span>(k=<span class="codeString">&quot;{&quot;</span>+</td></tr>
  <tr><td>21</td><td>g+<span class="codeString">&quot;}&quot;</span>,e=c.indexOf(k),0&lt;<span class="codeReserved">e</span>)var h=c.substring(0,e),c=c.substring(e+k.length),c=h+b[g]+c;<span class="codeReserved">return</span> c},A=[0,6,77,81,73,115,100,112,3],B=[0,4,77,81,84,84,4],q=<span class="codeReserved">function</span>(a,b){<span class="codeReserved">this</span>.type=a;<span class="codeReserved">for</span>(var c <span class="codeReserved">in</span> b)b.hasOwnProperty(c)&&(<span class="codeReserved">this</span>[c]=b[c])};q.prototype.encode=<span class="codeReserved">function</span>(){var a=(<span class="codeReserved">this</span>.type&15)&lt;&lt;<span class="codeReserved">4</span>,b=0,c=[],k=0,e;void 0!==<span class="codeReserved">this</span>.messageIdentifier&&(b+=2);<span class="codeReserved">switch</span>(<span class="codeReserved">this</span>.type){<span class="codeReserved">case</span> 1:<span class="codeReserved">switch</span>(<span class="codeReserved">this</span>.mqttVersion){<span class="codeReserved">case</span> 3:b+=A.length+3;<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 4:b+=B.length+3}b+=n(<span class="codeReserved">this</span>.clientId)+2;void 0!==<span class="codeReserved">this</span>.willMessage&&(b+=n(<span class="codeReserved">this</span>.willMessage.destinationName)+</td></tr>
  <tr><td>22</td><td>2,e=<span class="codeReserved">this</span>.willMessage.payloadBytes,e <span class="codeReserved">instanceof</span> Uint8Array||(e=<span class="codeReserved">new</span> Uint8Array(h)),b+=e.byteLength+2);void 0!==<span class="codeReserved">this</span>.userName&&(b+=n(<span class="codeReserved">this</span>.userName)+2);void 0!==<span class="codeReserved">this</span>.password&&(b+=n(<span class="codeReserved">this</span>.password)+2);<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 8:<span class="codeReserved">for</span>(var a=a|2,g=0;g&lt;<span class="codeReserved">this</span>.topics.length;g++)c[g]=n(<span class="codeReserved">this</span>.topics[g]),b+=c[g]+2;b+=<span class="codeReserved">this</span>.requestedQos.length;<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 10:a|=2;<span class="codeReserved">for</span>(g=0;g&lt;<span class="codeReserved">this</span>.topics.length;g++)c[g]=n(<span class="codeReserved">this</span>.topics[g]),b+=c[g]+2;<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 6:a|=2;<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 3:<span class="codeReserved">this</span>.payloadMessage.duplicate&&(a|=8);a=a|=<span class="codeReserved">this</span>.payloadMessage.qos&lt;&lt;<span class="codeReserved">1</span>;<span class="codeReserved">this</span>.payloadMessage.retained&&</td></tr>
  <tr><td>23</td><td>(a|=1);var k=n(<span class="codeReserved">this</span>.payloadMessage.destinationName),h=<span class="codeReserved">this</span>.payloadMessage.payloadBytes,b=b+(k+2)+h.byteLength;h <span class="codeReserved">instanceof</span> ArrayBuffer?h=<span class="codeReserved">new</span> Uint8Array(h):h <span class="codeReserved">instanceof</span> Uint8Array||(h=<span class="codeReserved">new</span> Uint8Array(h.buffer))}var f=b,g=Array(1),d=0;<span class="codeReserved">do</span>{var t=f%128,f=f&gt;&gt;7;0&lt;<span class="codeReserved">f</span>&&(t|=128);g[d++]=t}<span class="codeReserved">while</span>(0&lt;<span class="codeReserved">f</span>&&4&gt;d);f=g.length+1;b=<span class="codeReserved">new</span> ArrayBuffer(b+f);d=<span class="codeReserved">new</span> Uint8Array(b);d[0]=a;d.set(g,1);<span class="codeReserved">if</span>(3==<span class="codeReserved">this</span>.type)f=u(<span class="codeReserved">this</span>.payloadMessage.destinationName,k,d,f);<span class="codeReserved">else</span> <span class="codeReserved">if</span>(1==<span class="codeReserved">this</span>.type){<span class="codeReserved">switch</span>(<span class="codeReserved">this</span>.mqttVersion){<span class="codeReserved">case</span> 3:d.set(A,f);f+=A.length;</td></tr>
  <tr><td>24</td><td><span class="codeReserved">break</span>;<span class="codeReserved">case</span> 4:d.set(B,f),f+=B.length}a=0;<span class="codeReserved">this</span>.cleanSession&&(a=2);void 0!==<span class="codeReserved">this</span>.willMessage&&(a=a|4|<span class="codeReserved">this</span>.willMessage.qos&lt;&lt;<span class="codeReserved">3</span>,<span class="codeReserved">this</span>.willMessage.retained&&(a|=32));void 0!==<span class="codeReserved">this</span>.userName&&(a|=128);void 0!==<span class="codeReserved">this</span>.password&&(a|=64);d[f++]=a;f=s(<span class="codeReserved">this</span>.keepAliveInterval,d,f)}void 0!==<span class="codeReserved">this</span>.messageIdentifier&&(f=s(<span class="codeReserved">this</span>.messageIdentifier,d,f));<span class="codeReserved">switch</span>(<span class="codeReserved">this</span>.type){<span class="codeReserved">case</span> 1:f=u(<span class="codeReserved">this</span>.clientId,n(<span class="codeReserved">this</span>.clientId),d,f);void 0!==<span class="codeReserved">this</span>.willMessage&&(f=u(<span class="codeReserved">this</span>.willMessage.destinationName,n(<span class="codeReserved">this</span>.willMessage.destinationName),d,f),</td></tr>
  <tr><td>25</td><td>f=s(e.byteLength,d,f),d.set(e,f),f+=e.byteLength);void 0!==<span class="codeReserved">this</span>.userName&&(f=u(<span class="codeReserved">this</span>.userName,n(<span class="codeReserved">this</span>.userName),d,f));void 0!==<span class="codeReserved">this</span>.password&&u(<span class="codeReserved">this</span>.password,n(<span class="codeReserved">this</span>.password),d,f);<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 3:d.set(h,f);<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 8:<span class="codeReserved">for</span>(g=0;g&lt;<span class="codeReserved">this</span>.topics.length;g++)f=u(<span class="codeReserved">this</span>.topics[g],c[g],d,f),d[f++]=<span class="codeReserved">this</span>.requestedQos[g];<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 10:<span class="codeReserved">for</span>(g=0;g&lt;<span class="codeReserved">this</span>.topics.length;g++)f=u(<span class="codeReserved">this</span>.topics[g],c[g],d,f)}<span class="codeReserved">return</span> b};var F=<span class="codeReserved">function</span>(a,b,c){<span class="codeReserved">this</span>._client=a;<span class="codeReserved">this</span>._window=b;<span class="codeReserved">this</span>._keepAliveInterval=1E3*c;<span class="codeReserved">this</span>.isReset=!1;var k=(<span class="codeReserved">new</span> q(12)).encode(),</td></tr>
  <tr><td>26</td><td>e=<span class="codeReserved">function</span>(a){<span class="codeReserved">return</span> <span class="codeReserved">function</span>(){<span class="codeReserved">return</span> g.apply(a)}},g=<span class="codeReserved">function</span>(){<span class="codeReserved">this</span>.isReset?(<span class="codeReserved">this</span>.isReset=!1,<span class="codeReserved">this</span>._client._trace(<span class="codeString">&quot;Pinger.doPing&quot;</span>,<span class="codeString">&quot;send PINGREQ&quot;</span>),<span class="codeReserved">this</span>._client.socket.send(k),<span class="codeReserved">this</span>.timeout=<span class="codeReserved">this</span>._window.setTimeout(e(<span class="codeReserved">this</span>),<span class="codeReserved">this</span>._keepAliveInterval)):(<span class="codeReserved">this</span>._client._trace(<span class="codeString">&quot;Pinger.doPing&quot;</span>,<span class="codeString">&quot;Timed out&quot;</span>),<span class="codeReserved">this</span>._client._disconnected(h.PING_TIMEOUT.code,f(h.PING_TIMEOUT)))};<span class="codeReserved">this</span>.reset=<span class="codeReserved">function</span>(){<span class="codeReserved">this</span>.isReset=!0;<span class="codeReserved">this</span>._window.clearTimeout(<span class="codeReserved">this</span>.timeout);0&lt;<span class="codeReserved">this</span>._keepAliveInterval&&(<span class="codeReserved">this</span>.timeout=setTimeout(e(<span class="codeReserved">this</span>),</td></tr>
  <tr><td>27</td><td><span class="codeReserved">this</span>._keepAliveInterval))};<span class="codeReserved">this</span>.cancel=<span class="codeReserved">function</span>(){<span class="codeReserved">this</span>._window.clearTimeout(<span class="codeReserved">this</span>.timeout)}},w=<span class="codeReserved">function</span>(a,b,c,f,e){<span class="codeReserved">this</span>._window=b;c||(c=30);<span class="codeReserved">this</span>.timeout=setTimeout(<span class="codeReserved">function</span>(a,b,c){<span class="codeReserved">return</span> <span class="codeReserved">function</span>(){<span class="codeReserved">return</span> a.apply(b,c)}}(f,a,e),1E3*c);<span class="codeReserved">this</span>.cancel=<span class="codeReserved">function</span>(){<span class="codeReserved">this</span>._window.clearTimeout(<span class="codeReserved">this</span>.timeout)}},d=<span class="codeReserved">function</span>(a,b,c,d,e){<span class="codeReserved">if</span>(!(<span class="codeString">&quot;WebSocket&quot;</span><span class="codeReserved">in</span> p&&<span class="codeReserved">null</span>!==p.WebSocket))<span class="codeReserved">throw</span> Error(f(h.UNSUPPORTED,[<span class="codeString">&quot;WebSocket&quot;</span>]));<span class="codeReserved">if</span>(!(<span class="codeString">&quot;localStorage&quot;</span><span class="codeReserved">in</span> p&&<span class="codeReserved">null</span>!==p.localStorage))<span class="codeReserved">throw</span> Error(f(h.UNSUPPORTED,[<span class="codeString">&quot;localStorage&quot;</span>]));</td></tr>
  <tr><td>28</td><td><span class="codeReserved">if</span>(!(<span class="codeString">&quot;ArrayBuffer&quot;</span><span class="codeReserved">in</span> p&&<span class="codeReserved">null</span>!==p.ArrayBuffer))<span class="codeReserved">throw</span> Error(f(h.UNSUPPORTED,[<span class="codeString">&quot;ArrayBuffer&quot;</span>]));<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Paho.MQTT.Client&quot;</span>,a,b,c,d,e);<span class="codeReserved">this</span>.host=b;<span class="codeReserved">this</span>.port=c;<span class="codeReserved">this</span>.path=d;<span class="codeReserved">this</span>.uri=a;<span class="codeReserved">this</span>.clientId=e;<span class="codeReserved">this</span>._wsuri=<span class="codeReserved">null</span>;<span class="codeReserved">this</span>._localKey=b+<span class="codeString">&quot;:&quot;</span>+c+(<span class="codeString">&quot;/mqtt&quot;</span>!=d?<span class="codeString">&quot;:&quot;</span>+d:<span class="codeString">&quot;&quot;</span>)+<span class="codeString">&quot;:&quot;</span>+e+<span class="codeString">&quot;:&quot;</span>;<span class="codeReserved">this</span>._msg_queue=[];<span class="codeReserved">this</span>._buffered_msg_queue=[];<span class="codeReserved">this</span>._sentMessages={};<span class="codeReserved">this</span>._receivedMessages={};<span class="codeReserved">this</span>._notify_msg_sent={};<span class="codeReserved">this</span>._message_identifier=1;<span class="codeReserved">this</span>._sequence=0;<span class="codeReserved">for</span>(var g <span class="codeReserved">in</span> localStorage)0!==g.indexOf(<span class="codeString">&quot;Sent:&quot;</span>+<span class="codeReserved">this</span>._localKey)&&0!==</td></tr>
  <tr><td>29</td><td>g.indexOf(<span class="codeString">&quot;Received:&quot;</span>+<span class="codeReserved">this</span>._localKey)||<span class="codeReserved">this</span>.restore(g)};d.prototype.host=<span class="codeReserved">null</span>;d.prototype.port=<span class="codeReserved">null</span>;d.prototype.path=<span class="codeReserved">null</span>;d.prototype.uri=<span class="codeReserved">null</span>;d.prototype.clientId=<span class="codeReserved">null</span>;d.prototype.socket=<span class="codeReserved">null</span>;d.prototype.connected=!1;d.prototype.maxMessageIdentifier=65536;d.prototype.connectOptions=<span class="codeReserved">null</span>;d.prototype.hostIndex=<span class="codeReserved">null</span>;d.prototype.onConnected=<span class="codeReserved">null</span>;d.prototype.onConnectionLost=<span class="codeReserved">null</span>;d.prototype.onMessageDelivered=<span class="codeReserved">null</span>;d.prototype.onMessageArrived=<span class="codeReserved">null</span>;d.prototype.traceFunction=<span class="codeReserved">null</span>;d.prototype._msg_queue=</td></tr>
  <tr><td>30</td><td><span class="codeReserved">null</span>;d.prototype._buffered_msg_queue=<span class="codeReserved">null</span>;d.prototype._connectTimeout=<span class="codeReserved">null</span>;d.prototype.sendPinger=<span class="codeReserved">null</span>;d.prototype.receivePinger=<span class="codeReserved">null</span>;d.prototype._reconnectInterval=1;d.prototype._reconnecting=!1;d.prototype._reconnectTimeout=<span class="codeReserved">null</span>;d.prototype.disconnectedPublishing=!1;d.prototype.disconnectedBufferSize=5E3;d.prototype.receiveBuffer=<span class="codeReserved">null</span>;d.prototype._traceBuffer=<span class="codeReserved">null</span>;d.prototype._MAX_TRACE_ENTRIES=100;d.prototype.connect=<span class="codeReserved">function</span>(a){var b=<span class="codeReserved">this</span>._traceMask(a,<span class="codeString">&quot;password&quot;</span>);<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client.connect&quot;</span>,</td></tr>
  <tr><td>31</td><td>b,<span class="codeReserved">this</span>.socket,<span class="codeReserved">this</span>.connected);<span class="codeReserved">if</span>(<span class="codeReserved">this</span>.connected)<span class="codeReserved">throw</span> Error(f(h.INVALID_STATE,[<span class="codeString">&quot;already connected&quot;</span>]));<span class="codeReserved">if</span>(<span class="codeReserved">this</span>.socket)<span class="codeReserved">throw</span> Error(f(h.INVALID_STATE,[<span class="codeString">&quot;already connected&quot;</span>]));<span class="codeReserved">this</span>._reconnecting&&(<span class="codeReserved">this</span>._reconnectTimeout.cancel(),<span class="codeReserved">this</span>._reconnectTimeout=<span class="codeReserved">null</span>,<span class="codeReserved">this</span>._reconnecting=!1);<span class="codeReserved">this</span>.connectOptions=a;<span class="codeReserved">this</span>._reconnectInterval=1;<span class="codeReserved">this</span>._reconnecting=!1;a.uris?(<span class="codeReserved">this</span>.hostIndex=0,<span class="codeReserved">this</span>._doConnect(a.uris[0])):<span class="codeReserved">this</span>._doConnect(<span class="codeReserved">this</span>.uri)};d.prototype.subscribe=<span class="codeReserved">function</span>(a,b){<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client.subscribe&quot;</span>,a,b);<span class="codeReserved">if</span>(!<span class="codeReserved">this</span>.connected)<span class="codeReserved">throw</span> Error(f(h.INVALID_STATE,</td></tr>
  <tr><td>32</td><td>[<span class="codeString">&quot;not connected&quot;</span>]));var c=<span class="codeReserved">new</span> q(8);c.topics=[a];c.requestedQos=void 0!==b.qos?[b.qos]:[0];b.onSuccess&&(c.onSuccess=<span class="codeReserved">function</span>(a){b.onSuccess({invocationContext:b.invocationContext,grantedQos:a})});b.onFailure&&(c.onFailure=<span class="codeReserved">function</span>(a){b.onFailure({invocationContext:b.invocationContext,errorCode:a,errorMessage:f(a)})});b.timeout&&(c.timeOut=<span class="codeReserved">new</span> w(<span class="codeReserved">this</span>,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.SUBSCRIBE_TIMEOUT.code,errorMessage:f(h.SUBSCRIBE_TIMEOUT)}]));<span class="codeReserved">this</span>._requires_ack(c);</td></tr>
  <tr><td>33</td><td><span class="codeReserved">this</span>._schedule_message(c)};d.prototype.unsubscribe=<span class="codeReserved">function</span>(a,b){<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client.unsubscribe&quot;</span>,a,b);<span class="codeReserved">if</span>(!<span class="codeReserved">this</span>.connected)<span class="codeReserved">throw</span> Error(f(h.INVALID_STATE,[<span class="codeString">&quot;not connected&quot;</span>]));var c=<span class="codeReserved">new</span> q(10);c.topics=[a];b.onSuccess&&(c.callback=<span class="codeReserved">function</span>(){b.onSuccess({invocationContext:b.invocationContext})});b.timeout&&(c.timeOut=<span class="codeReserved">new</span> w(<span class="codeReserved">this</span>,window,b.timeout,b.onFailure,[{invocationContext:b.invocationContext,errorCode:h.UNSUBSCRIBE_TIMEOUT.code,errorMessage:f(h.UNSUBSCRIBE_TIMEOUT)}]));<span class="codeReserved">this</span>._requires_ack(c);<span class="codeReserved">this</span>._schedule_message(c)};</td></tr>
  <tr><td>34</td><td>d.prototype.send=<span class="codeReserved">function</span>(a){<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client.send&quot;</span>,a);wireMessage=<span class="codeReserved">new</span> q(3);wireMessage.payloadMessage=a;<span class="codeReserved">if</span>(<span class="codeReserved">this</span>.connected)0&lt;<span class="codeReserved">a</span>.qos?<span class="codeReserved">this</span>._requires_ack(wireMessage):<span class="codeReserved">this</span>.onMessageDelivered&&(<span class="codeReserved">this</span>._notify_msg_sent[wireMessage]=<span class="codeReserved">this</span>.onMessageDelivered(wireMessage.payloadMessage)),<span class="codeReserved">this</span>._schedule_message(wireMessage);<span class="codeReserved">else</span> <span class="codeReserved">if</span>(<span class="codeReserved">this</span>._reconnecting&&<span class="codeReserved">this</span>.disconnectedPublishing){<span class="codeReserved">if</span>(Object.keys(<span class="codeReserved">this</span>._sentMessages).length+<span class="codeReserved">this</span>._buffered_msg_queue.length&gt;<span class="codeReserved">this</span>.disconnectedBufferSize)<span class="codeReserved">throw</span> Error(f(h.BUFFER_FULL,</td></tr>
  <tr><td>35</td><td>[<span class="codeReserved">this</span>.disconnectedBufferSize]));0&lt;<span class="codeReserved">a</span>.qos?<span class="codeReserved">this</span>._requires_ack(wireMessage):(wireMessage.sequence=++<span class="codeReserved">this</span>._sequence,<span class="codeReserved">this</span>._buffered_msg_queue.push(wireMessage))}<span class="codeReserved">else</span> <span class="codeReserved">throw</span> Error(f(h.INVALID_STATE,[<span class="codeString">&quot;not connected&quot;</span>]));};d.prototype.disconnect=<span class="codeReserved">function</span>(){<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client.disconnect&quot;</span>);<span class="codeReserved">this</span>._reconnecting&&(<span class="codeReserved">this</span>._reconnectTimeout.cancel(),<span class="codeReserved">this</span>._reconnectTimeout=<span class="codeReserved">null</span>,<span class="codeReserved">this</span>._reconnecting=!1);<span class="codeReserved">if</span>(!<span class="codeReserved">this</span>.socket)<span class="codeReserved">throw</span> Error(f(h.INVALID_STATE,[<span class="codeString">&quot;not connecting or connected&quot;</span>]));wireMessage=<span class="codeReserved">new</span> q(14);<span class="codeReserved">this</span>._notify_msg_sent[wireMessage]=</td></tr>
  <tr><td>36</td><td>v(<span class="codeReserved">this</span>._disconnected,<span class="codeReserved">this</span>);<span class="codeReserved">this</span>._schedule_message(wireMessage)};d.prototype.getTraceLog=<span class="codeReserved">function</span>(){<span class="codeReserved">if</span>(<span class="codeReserved">null</span>!==<span class="codeReserved">this</span>._traceBuffer){<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client.getTraceLog&quot;</span>,<span class="codeReserved">new</span> Date);<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client.getTraceLog <span class="codeReserved">in</span> flight messages&quot;</span>,<span class="codeReserved">this</span>._sentMessages.length);<span class="codeReserved">for</span>(var a <span class="codeReserved">in</span> <span class="codeReserved">this</span>._sentMessages)<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;_sentMessages &quot;</span>,a,<span class="codeReserved">this</span>._sentMessages[a]);<span class="codeReserved">for</span>(a <span class="codeReserved">in</span> <span class="codeReserved">this</span>._receivedMessages)<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;_receivedMessages &quot;</span>,a,<span class="codeReserved">this</span>._receivedMessages[a]);<span class="codeReserved">return</span> <span class="codeReserved">this</span>._traceBuffer}};d.prototype.startTrace=<span class="codeReserved">function</span>(){<span class="codeReserved">null</span>===<span class="codeReserved">this</span>._traceBuffer&&</td></tr>
  <tr><td>37</td><td>(<span class="codeReserved">this</span>._traceBuffer=[]);<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client.startTrace&quot;</span>,<span class="codeReserved">new</span> Date,<span class="codeString">&quot;1.0.3&quot;</span>)};d.prototype.stopTrace=<span class="codeReserved">function</span>(){delete <span class="codeReserved">this</span>._traceBuffer};d.prototype._doConnect=<span class="codeReserved">function</span>(a){<span class="codeReserved">this</span>.connectOptions.useSSL&&(a=a.split(<span class="codeString">&quot;:&quot;</span>),a[0]=<span class="codeString">&quot;wss&quot;</span>,a=a.join(<span class="codeString">&quot;:&quot;</span>));<span class="codeReserved">this</span>._wsuri=a;<span class="codeReserved">this</span>.connected=!1;<span class="codeReserved">this</span>.socket=4&gt;<span class="codeReserved">this</span>.connectOptions.mqttVersion?<span class="codeReserved">new</span> WebSocket(a,[<span class="codeString">&quot;mqttv3.1&quot;</span>]):<span class="codeReserved">new</span> WebSocket(a,[<span class="codeString">&quot;mqtt&quot;</span>]);<span class="codeReserved">this</span>.socket.binaryType=<span class="codeString">&quot;arraybuffer&quot;</span>;<span class="codeReserved">this</span>.socket.onopen=v(<span class="codeReserved">this</span>._on_socket_open,<span class="codeReserved">this</span>);<span class="codeReserved">this</span>.socket.onmessage=v(<span class="codeReserved">this</span>._on_socket_message,</td></tr>
  <tr><td>38</td><td><span class="codeReserved">this</span>);<span class="codeReserved">this</span>.socket.onerror=v(<span class="codeReserved">this</span>._on_socket_error,<span class="codeReserved">this</span>);<span class="codeReserved">this</span>.socket.onclose=v(<span class="codeReserved">this</span>._on_socket_close,<span class="codeReserved">this</span>);<span class="codeReserved">this</span>.sendPinger=<span class="codeReserved">new</span> F(<span class="codeReserved">this</span>,window,<span class="codeReserved">this</span>.connectOptions.keepAliveInterval);<span class="codeReserved">this</span>.receivePinger=<span class="codeReserved">new</span> F(<span class="codeReserved">this</span>,window,<span class="codeReserved">this</span>.connectOptions.keepAliveInterval);<span class="codeReserved">this</span>._connectTimeout&&(<span class="codeReserved">this</span>._connectTimeout.cancel(),<span class="codeReserved">this</span>._connectTimeout=<span class="codeReserved">null</span>);<span class="codeReserved">this</span>._connectTimeout=<span class="codeReserved">new</span> w(<span class="codeReserved">this</span>,window,<span class="codeReserved">this</span>.connectOptions.timeout,<span class="codeReserved">this</span>._disconnected,[h.CONNECT_TIMEOUT.code,f(h.CONNECT_TIMEOUT)])};d.prototype._schedule_message=<span class="codeReserved">function</span>(a){<span class="codeReserved">this</span>._msg_queue.push(a);</td></tr>
  <tr><td>39</td><td><span class="codeReserved">this</span>.connected&&<span class="codeReserved">this</span>._process_queue()};d.prototype.store=<span class="codeReserved">function</span>(a,b){var c={type:b.type,messageIdentifier:b.messageIdentifier,version:1};<span class="codeReserved">switch</span>(b.type){<span class="codeReserved">case</span> 3:b.pubRecReceived&&(c.pubRecReceived=!0);c.payloadMessage={};<span class="codeReserved">for</span>(var d=<span class="codeString">&quot;&quot;</span>,e=b.payloadMessage.payloadBytes,g=0;g&lt;<span class="codeReserved">e</span>.length;g++)d=15&gt;=e[g]?d+<span class="codeString">&quot;0&quot;</span>+e[g].toString(16):d+e[g].toString(16);c.payloadMessage.payloadHex=d;c.payloadMessage.qos=b.payloadMessage.qos;c.payloadMessage.destinationName=b.payloadMessage.destinationName;b.payloadMessage.duplicate&&</td></tr>
  <tr><td>40</td><td>(c.payloadMessage.duplicate=!0);b.payloadMessage.retained&&(c.payloadMessage.retained=!0);0===a.indexOf(<span class="codeString">&quot;Sent:&quot;</span>)&&(void 0===b.sequence&&(b.sequence=++<span class="codeReserved">this</span>._sequence),c.sequence=b.sequence);<span class="codeReserved">break</span>;<span class="codeReserved">default</span>:<span class="codeReserved">throw</span> Error(f(h.INVALID_STORED_DATA,[key,c]));}localStorage.setItem(a+<span class="codeReserved">this</span>._localKey+b.messageIdentifier,JSON.stringify(c))};d.prototype.restore=<span class="codeReserved">function</span>(a){var b=localStorage.getItem(a),c=JSON.parse(b),d=<span class="codeReserved">new</span> q(c.type,c);<span class="codeReserved">switch</span>(c.type){<span class="codeReserved">case</span> 3:<span class="codeReserved">for</span>(var b=c.payloadMessage.payloadHex,e=<span class="codeReserved">new</span> ArrayBuffer(b.length/</td></tr>
  <tr><td>41</td><td>2),e=<span class="codeReserved">new</span> Uint8Array(e),g=0;2&lt;=b.length;){var m=parseInt(b.substring(0,2),16),b=b.substring(2,b.length);e[g++]=m}b=<span class="codeReserved">new</span> Paho.MQTT.Message(e);b.qos=c.payloadMessage.qos;b.destinationName=c.payloadMessage.destinationName;c.payloadMessage.duplicate&&(b.duplicate=!0);c.payloadMessage.retained&&(b.retained=!0);d.payloadMessage=b;<span class="codeReserved">break</span>;<span class="codeReserved">default</span>:<span class="codeReserved">throw</span> Error(f(h.INVALID_STORED_DATA,[a,b]));}0===a.indexOf(<span class="codeString">&quot;Sent:&quot;</span>+<span class="codeReserved">this</span>._localKey)?(d.payloadMessage.duplicate=!0,<span class="codeReserved">this</span>._sentMessages[d.messageIdentifier]=d):0===a.indexOf(<span class="codeString">&quot;Received:&quot;</span>+</td></tr>
  <tr><td>42</td><td><span class="codeReserved">this</span>._localKey)&&(<span class="codeReserved">this</span>._receivedMessages[d.messageIdentifier]=d)};d.prototype._process_queue=<span class="codeReserved">function</span>(){<span class="codeReserved">for</span>(var a=<span class="codeReserved">null</span>,b=<span class="codeReserved">this</span>._msg_queue.reverse();a=b.pop();)<span class="codeReserved">this</span>._socket_send(a),<span class="codeReserved">this</span>._notify_msg_sent[a]&&(<span class="codeReserved">this</span>._notify_msg_sent[a](),delete <span class="codeReserved">this</span>._notify_msg_sent[a])};d.prototype._requires_ack=<span class="codeReserved">function</span>(a){var b=Object.keys(<span class="codeReserved">this</span>._sentMessages).length;<span class="codeReserved">if</span>(b&gt;<span class="codeReserved">this</span>.maxMessageIdentifier)<span class="codeReserved">throw</span> Error(<span class="codeString">&quot;Too many messages:&quot;</span>+b);<span class="codeReserved">for</span>(;void 0!==<span class="codeReserved">this</span>._sentMessages[<span class="codeReserved">this</span>._message_identifier];)<span class="codeReserved">this</span>._message_identifier++;</td></tr>
  <tr><td>43</td><td>a.messageIdentifier=<span class="codeReserved">this</span>._message_identifier;<span class="codeReserved">this</span>._sentMessages[a.messageIdentifier]=a;3===a.type&&<span class="codeReserved">this</span>.store(<span class="codeString">&quot;Sent:&quot;</span>,a);<span class="codeReserved">this</span>._message_identifier===<span class="codeReserved">this</span>.maxMessageIdentifier&&(<span class="codeReserved">this</span>._message_identifier=1)};d.prototype._on_socket_open=<span class="codeReserved">function</span>(){var a=<span class="codeReserved">new</span> q(1,<span class="codeReserved">this</span>.connectOptions);a.clientId=<span class="codeReserved">this</span>.clientId;<span class="codeReserved">this</span>._socket_send(a)};d.prototype._on_socket_message=<span class="codeReserved">function</span>(a){<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client._on_socket_message&quot;</span>,a.data);a=<span class="codeReserved">this</span>._deframeMessages(a.data);<span class="codeReserved">for</span>(var b=0;b&lt;<span class="codeReserved">a</span>.length;b+=1)<span class="codeReserved">this</span>._handleMessage(a[b])};</td></tr>
  <tr><td>44</td><td>d.prototype._deframeMessages=<span class="codeReserved">function</span>(a){a=<span class="codeReserved">new</span> Uint8Array(a);var b=[];<span class="codeReserved">if</span>(<span class="codeReserved">this</span>.receiveBuffer){var c=<span class="codeReserved">new</span> Uint8Array(<span class="codeReserved">this</span>.receiveBuffer.length+a.length);c.set(<span class="codeReserved">this</span>.receiveBuffer);c.set(a,<span class="codeReserved">this</span>.receiveBuffer.length);a=c;delete <span class="codeReserved">this</span>.receiveBuffer}<span class="codeReserved">try</span>{<span class="codeReserved">for</span>(c=0;c&lt;<span class="codeReserved">a</span>.length;){var d;a:{var e=a,g=c,m=g,n=e[g],l=n&gt;&gt;4,t=n&15,g=g+1,x=void 0,C=0,p=1;<span class="codeReserved">do</span>{<span class="codeReserved">if</span>(g==e.length){d=[<span class="codeReserved">null</span>,m];<span class="codeReserved">break</span> a}x=e[g++];C+=(x&127)*p;p*=128}<span class="codeReserved">while</span>(0!==(x&128));x=g+C;<span class="codeReserved">if</span>(x&gt;e.length)d=[<span class="codeReserved">null</span>,m];<span class="codeReserved">else</span>{var y=<span class="codeReserved">new</span> q(l);<span class="codeReserved">switch</span>(l){<span class="codeReserved">case</span> 2:e[g++]&1&&(y.sessionPresent=</td></tr>
  <tr><td>45</td><td>!0);y.returnCode=e[g++];<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 3:var m=t&gt;&gt;1&3,s=256*e[g]+e[g+1],g=g+2,u=E(e,g,s),g=g+s;0&lt;<span class="codeReserved">m</span>&&(y.messageIdentifier=256*e[g]+e[g+1],g+=2);var r=<span class="codeReserved">new</span> Paho.MQTT.Message(e.subarray(g,x));1==(t&1)&&(r.retained=!0);8==(t&8)&&(r.duplicate=!0);r.qos=m;r.destinationName=u;y.payloadMessage=r;<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 4:<span class="codeReserved">case</span> 5:<span class="codeReserved">case</span> 6:<span class="codeReserved">case</span> 7:<span class="codeReserved">case</span> 11:y.messageIdentifier=256*e[g]+e[g+1];<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 9:y.messageIdentifier=256*e[g]+e[g+1],g+=2,y.returnCode=e.subarray(g,x)}d=[y,x]}}var v=d[0],c=d[1];<span class="codeReserved">if</span>(<span class="codeReserved">null</span>!==v)b.push(v);<span class="codeReserved">else</span> <span class="codeReserved">break</span>}c&lt;</td></tr>
  <tr><td>46</td><td>a.length&&(<span class="codeReserved">this</span>.receiveBuffer=a.subarray(c))}<span class="codeReserved">catch</span>(w){d=<span class="codeString">&quot;undefined&quot;</span>==w.hasOwnProperty(<span class="codeString">&quot;stack&quot;</span>)?w.stack.toString():<span class="codeString">&quot;No Error Stack Available&quot;</span>;<span class="codeReserved">this</span>._disconnected(h.INTERNAL_ERROR.code,f(h.INTERNAL_ERROR,[w.message,d]));<span class="codeReserved">return</span>}<span class="codeReserved">return</span> b};d.prototype._handleMessage=<span class="codeReserved">function</span>(a){<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client._handleMessage&quot;</span>,a);<span class="codeReserved">try</span>{<span class="codeReserved">switch</span>(a.type){<span class="codeReserved">case</span> 2:<span class="codeReserved">this</span>._connectTimeout.cancel();<span class="codeReserved">this</span>._reconnectTimeout&&<span class="codeReserved">this</span>._reconnectTimeout.cancel();<span class="codeReserved">if</span>(<span class="codeReserved">this</span>.connectOptions.cleanSession){<span class="codeReserved">for</span>(var b <span class="codeReserved">in</span> <span class="codeReserved">this</span>._sentMessages){var c=<span class="codeReserved">this</span>._sentMessages[b];</td></tr>
  <tr><td>47</td><td>localStorage.removeItem(<span class="codeString">&quot;Sent:&quot;</span>+<span class="codeReserved">this</span>._localKey+c.messageIdentifier)}<span class="codeReserved">this</span>._sentMessages={};<span class="codeReserved">for</span>(b <span class="codeReserved">in</span> <span class="codeReserved">this</span>._receivedMessages){var d=<span class="codeReserved">this</span>._receivedMessages[b];localStorage.removeItem(<span class="codeString">&quot;Received:&quot;</span>+<span class="codeReserved">this</span>._localKey+d.messageIdentifier)}<span class="codeReserved">this</span>._receivedMessages={}}<span class="codeReserved">if</span>(0===a.returnCode)<span class="codeReserved">this</span>.connected=!0,<span class="codeReserved">this</span>.connectOptions.uris&&(<span class="codeReserved">this</span>.hostIndex=<span class="codeReserved">this</span>.connectOptions.uris.length);<span class="codeReserved">else</span>{<span class="codeReserved">this</span>._disconnected(h.CONNACK_RETURNCODE.code,f(h.CONNACK_RETURNCODE,[a.returnCode,H[a.returnCode]]));<span class="codeReserved">break</span>}a=[];<span class="codeReserved">for</span>(var e <span class="codeReserved">in</span> <span class="codeReserved">this</span>._sentMessages)<span class="codeReserved">this</span>._sentMessages.hasOwnProperty(e)&&</td></tr>
  <tr><td>48</td><td>a.push(<span class="codeReserved">this</span>._sentMessages[e]);<span class="codeReserved">if</span>(0&lt;<span class="codeReserved">this</span>._buffered_msg_queue.length){e=<span class="codeReserved">null</span>;<span class="codeReserved">for</span>(var g=<span class="codeReserved">this</span>._buffered_msg_queue.reverse();e=g.pop();)a.push(e),<span class="codeReserved">this</span>.onMessageDelivered&&(<span class="codeReserved">this</span>._notify_msg_sent[e]=<span class="codeReserved">this</span>.onMessageDelivered(e.payloadMessage))}a=a.sort(<span class="codeReserved">function</span>(a,b){<span class="codeReserved">return</span> a.sequence-b.sequence});<span class="codeReserved">for</span>(var g=0,m=a.length;g&lt;<span class="codeReserved">m</span>;g++)<span class="codeReserved">if</span>(c=a[g],3==c.type&&c.pubRecReceived){var n=<span class="codeReserved">new</span> q(6,{messageIdentifier:c.messageIdentifier});<span class="codeReserved">this</span>._schedule_message(n)}<span class="codeReserved">else</span> <span class="codeReserved">this</span>._schedule_message(c);<span class="codeReserved">if</span>(<span class="codeReserved">this</span>.connectOptions.onSuccess)<span class="codeReserved">this</span>.connectOptions.onSuccess({invocationContext:<span class="codeReserved">this</span>.connectOptions.invocationContext});</td></tr>
  <tr><td>49</td><td>c=!1;<span class="codeReserved">this</span>._reconnecting&&(c=!0,<span class="codeReserved">this</span>._reconnectInterval=1,<span class="codeReserved">this</span>._reconnecting=!1);<span class="codeReserved">this</span>._connected(c,<span class="codeReserved">this</span>._wsuri);<span class="codeReserved">this</span>._process_queue();<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 3:<span class="codeReserved">this</span>._receivePublish(a);<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 4:<span class="codeReserved">if</span>(c=<span class="codeReserved">this</span>._sentMessages[a.messageIdentifier])<span class="codeReserved">if</span>(delete <span class="codeReserved">this</span>._sentMessages[a.messageIdentifier],localStorage.removeItem(<span class="codeString">&quot;Sent:&quot;</span>+<span class="codeReserved">this</span>._localKey+a.messageIdentifier),<span class="codeReserved">this</span>.onMessageDelivered)<span class="codeReserved">this</span>.onMessageDelivered(c.payloadMessage);<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 5:<span class="codeReserved">if</span>(c=<span class="codeReserved">this</span>._sentMessages[a.messageIdentifier])c.pubRecReceived=!0,n=<span class="codeReserved">new</span> q(6,{messageIdentifier:a.messageIdentifier}),</td></tr>
  <tr><td>50</td><td><span class="codeReserved">this</span>.store(<span class="codeString">&quot;Sent:&quot;</span>,c),<span class="codeReserved">this</span>._schedule_message(n);<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 6:d=<span class="codeReserved">this</span>._receivedMessages[a.messageIdentifier];localStorage.removeItem(<span class="codeString">&quot;Received:&quot;</span>+<span class="codeReserved">this</span>._localKey+a.messageIdentifier);d&&(<span class="codeReserved">this</span>._receiveMessage(d),delete <span class="codeReserved">this</span>._receivedMessages[a.messageIdentifier]);var l=<span class="codeReserved">new</span> q(7,{messageIdentifier:a.messageIdentifier});<span class="codeReserved">this</span>._schedule_message(l);<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 7:c=<span class="codeReserved">this</span>._sentMessages[a.messageIdentifier];delete <span class="codeReserved">this</span>._sentMessages[a.messageIdentifier];localStorage.removeItem(<span class="codeString">&quot;Sent:&quot;</span>+<span class="codeReserved">this</span>._localKey+a.messageIdentifier);</td></tr>
  <tr><td>51</td><td><span class="codeReserved">if</span>(<span class="codeReserved">this</span>.onMessageDelivered)<span class="codeReserved">this</span>.onMessageDelivered(c.payloadMessage);<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 9:<span class="codeReserved">if</span>(c=<span class="codeReserved">this</span>._sentMessages[a.messageIdentifier]){c.timeOut&&c.timeOut.cancel();<span class="codeReserved">if</span>(128===a.returnCode[0]){<span class="codeReserved">if</span>(c.onFailure)c.onFailure(a.returnCode)}<span class="codeReserved">else</span> <span class="codeReserved">if</span>(c.onSuccess)c.onSuccess(a.returnCode);delete <span class="codeReserved">this</span>._sentMessages[a.messageIdentifier]}<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 11:<span class="codeReserved">if</span>(c=<span class="codeReserved">this</span>._sentMessages[a.messageIdentifier])c.timeOut&&c.timeOut.cancel(),c.callback&&c.callback(),delete <span class="codeReserved">this</span>._sentMessages[a.messageIdentifier];<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 13:<span class="codeReserved">this</span>.sendPinger.reset();</td></tr>
  <tr><td>52</td><td><span class="codeReserved">break</span>;<span class="codeReserved">case</span> 14:<span class="codeReserved">this</span>._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,f(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]));<span class="codeReserved">break</span>;<span class="codeReserved">default</span>:<span class="codeReserved">this</span>._disconnected(h.INVALID_MQTT_MESSAGE_TYPE.code,f(h.INVALID_MQTT_MESSAGE_TYPE,[a.type]))}}<span class="codeReserved">catch</span>(t){c=<span class="codeString">&quot;undefined&quot;</span>==t.hasOwnProperty(<span class="codeString">&quot;stack&quot;</span>)?t.stack.toString():<span class="codeString">&quot;No Error Stack Available&quot;</span>,<span class="codeReserved">this</span>._disconnected(h.INTERNAL_ERROR.code,f(h.INTERNAL_ERROR,[t.message,c]))}};d.prototype._on_socket_error=<span class="codeReserved">function</span>(a){<span class="codeReserved">this</span>._reconnecting||<span class="codeReserved">this</span>._disconnected(h.SOCKET_ERROR.code,f(h.SOCKET_ERROR,</td></tr>
  <tr><td>53</td><td>[a.data]))};d.prototype._on_socket_close=<span class="codeReserved">function</span>(){<span class="codeReserved">this</span>._reconnecting||<span class="codeReserved">this</span>._disconnected(h.SOCKET_CLOSE.code,f(h.SOCKET_CLOSE))};d.prototype._socket_send=<span class="codeReserved">function</span>(a){<span class="codeReserved">if</span>(1==a.type){var b=<span class="codeReserved">this</span>._traceMask(a,<span class="codeString">&quot;password&quot;</span>);<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client._socket_send&quot;</span>,b)}<span class="codeReserved">else</span> <span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client._socket_send&quot;</span>,a);<span class="codeReserved">this</span>.socket.send(a.encode());<span class="codeReserved">this</span>.sendPinger.reset()};d.prototype._receivePublish=<span class="codeReserved">function</span>(a){<span class="codeReserved">switch</span>(a.payloadMessage.qos){<span class="codeReserved">case</span> <span class="codeString">&quot;undefined&quot;</span>:<span class="codeReserved">case</span> 0:<span class="codeReserved">this</span>._receiveMessage(a);<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 1:var b=<span class="codeReserved">new</span> q(4,{messageIdentifier:a.messageIdentifier});</td></tr>
  <tr><td>54</td><td><span class="codeReserved">this</span>._schedule_message(b);<span class="codeReserved">this</span>._receiveMessage(a);<span class="codeReserved">break</span>;<span class="codeReserved">case</span> 2:<span class="codeReserved">this</span>._receivedMessages[a.messageIdentifier]=a;<span class="codeReserved">this</span>.store(<span class="codeString">&quot;Received:&quot;</span>,a);a=<span class="codeReserved">new</span> q(5,{messageIdentifier:a.messageIdentifier});<span class="codeReserved">this</span>._schedule_message(a);<span class="codeReserved">break</span>;<span class="codeReserved">default</span>:<span class="codeReserved">throw</span> Error(<span class="codeString">&quot;Invaild qos\x3d&quot;</span>+wireMmessage.payloadMessage.qos);}};d.prototype._receiveMessage=<span class="codeReserved">function</span>(a){<span class="codeReserved">if</span>(<span class="codeReserved">this</span>.onMessageArrived)<span class="codeReserved">this</span>.onMessageArrived(a.payloadMessage)};d.prototype._connected=<span class="codeReserved">function</span>(a,b){<span class="codeReserved">if</span>(<span class="codeReserved">this</span>.onConnected)<span class="codeReserved">this</span>.onConnected(a,b)};d.prototype._reconnect=</td></tr>
  <tr><td>55</td><td><span class="codeReserved">function</span>(){<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client._reconnect&quot;</span>);<span class="codeReserved">this</span>.connected||(<span class="codeReserved">this</span>._reconnecting=!0,<span class="codeReserved">this</span>.sendPinger.cancel(),<span class="codeReserved">this</span>.receivePinger.cancel(),128&gt;<span class="codeReserved">this</span>._reconnectInterval&&(<span class="codeReserved">this</span>._reconnectInterval*=2),<span class="codeReserved">this</span>.connectOptions.uris?(<span class="codeReserved">this</span>.hostIndex=0,<span class="codeReserved">this</span>._doConnect(<span class="codeReserved">this</span>.connectOptions.uris[0])):<span class="codeReserved">this</span>._doConnect(<span class="codeReserved">this</span>.uri))};d.prototype._disconnected=<span class="codeReserved">function</span>(a,b){<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Client._disconnected&quot;</span>,a,b);<span class="codeReserved">if</span>(void 0!==a&&<span class="codeReserved">this</span>._reconnecting)<span class="codeReserved">this</span>._reconnectTimeout=<span class="codeReserved">new</span> w(<span class="codeReserved">this</span>,window,<span class="codeReserved">this</span>._reconnectInterval,<span class="codeReserved">this</span>._reconnect);</td></tr>
  <tr><td>56</td><td><span class="codeReserved">else</span> <span class="codeReserved">if</span>(<span class="codeReserved">this</span>.sendPinger.cancel(),<span class="codeReserved">this</span>.receivePinger.cancel(),<span class="codeReserved">this</span>._connectTimeout&&(<span class="codeReserved">this</span>._connectTimeout.cancel(),<span class="codeReserved">this</span>._connectTimeout=<span class="codeReserved">null</span>),<span class="codeReserved">this</span>._msg_queue=[],<span class="codeReserved">this</span>._buffered_msg_queue=[],<span class="codeReserved">this</span>._notify_msg_sent={},<span class="codeReserved">this</span>.socket&&(<span class="codeReserved">this</span>.socket.onopen=<span class="codeReserved">null</span>,<span class="codeReserved">this</span>.socket.onmessage=<span class="codeReserved">null</span>,<span class="codeReserved">this</span>.socket.onerror=<span class="codeReserved">null</span>,<span class="codeReserved">this</span>.socket.onclose=<span class="codeReserved">null</span>,1===<span class="codeReserved">this</span>.socket.readyState&&<span class="codeReserved">this</span>.socket.close(),delete <span class="codeReserved">this</span>.socket),<span class="codeReserved">this</span>.connectOptions.uris&&<span class="codeReserved">this</span>.hostIndex&lt;<span class="codeReserved">this</span>.connectOptions.uris.length-1)<span class="codeReserved">this</span>.hostIndex++,<span class="codeReserved">this</span>._doConnect(<span class="codeReserved">this</span>.connectOptions.uris[<span class="codeReserved">this</span>.hostIndex]);</td></tr>
  <tr><td>57</td><td><span class="codeReserved">else</span> <span class="codeReserved">if</span>(void 0===a&&(a=h.OK.code,b=f(h.OK)),<span class="codeReserved">this</span>.connected){<span class="codeReserved">this</span>.connected=!1;<span class="codeReserved">if</span>(<span class="codeReserved">this</span>.onConnectionLost)<span class="codeReserved">this</span>.onConnectionLost({errorCode:a,errorMessage:b,reconnect:<span class="codeReserved">this</span>.connectOptions.reconnect,uri:<span class="codeReserved">this</span>._wsuri});a!==h.OK.code&&<span class="codeReserved">this</span>.connectOptions.reconnect&&(<span class="codeReserved">this</span>._reconnectInterval=1,<span class="codeReserved">this</span>._reconnect())}<span class="codeReserved">else</span> <span class="codeReserved">if</span>(4===<span class="codeReserved">this</span>.connectOptions.mqttVersion&&!1===<span class="codeReserved">this</span>.connectOptions.mqttVersionExplicit)<span class="codeReserved">this</span>._trace(<span class="codeString">&quot;Failed to connect V4, dropping back to V3&quot;</span>),<span class="codeReserved">this</span>.connectOptions.mqttVersion=3,<span class="codeReserved">this</span>.connectOptions.uris?</td></tr>
  <tr><td>58</td><td>(<span class="codeReserved">this</span>.hostIndex=0,<span class="codeReserved">this</span>._doConnect(<span class="codeReserved">this</span>.connectOptions.uris[0])):<span class="codeReserved">this</span>._doConnect(<span class="codeReserved">this</span>.uri);<span class="codeReserved">else</span> <span class="codeReserved">if</span>(<span class="codeReserved">this</span>.connectOptions.onFailure)<span class="codeReserved">this</span>.connectOptions.onFailure({invocationContext:<span class="codeReserved">this</span>.connectOptions.invocationContext,errorCode:a,errorMessage:b})};d.prototype._trace=<span class="codeReserved">function</span>(){<span class="codeReserved">if</span>(<span class="codeReserved">this</span>.traceFunction){<span class="codeReserved">for</span>(var a <span class="codeReserved">in</span> arguments)<span class="codeString">&quot;undefined&quot;</span>!==<span class="codeReserved">typeof</span> arguments[a]&&arguments.splice(a,1,JSON.stringify(arguments[a]));a=Array.prototype.slice.call(arguments).join(<span class="codeString">&quot;&quot;</span>);<span class="codeReserved">this</span>.traceFunction({severity:<span class="codeString">&quot;Debug&quot;</span>,message:a})}<span class="codeReserved">if</span>(<span class="codeReserved">null</span>!==</td></tr>
  <tr><td>59</td><td><span class="codeReserved">this</span>._traceBuffer){a=0;<span class="codeReserved">for</span>(var b=arguments.length;a&lt;<span class="codeReserved">b</span>;a++)<span class="codeReserved">this</span>._traceBuffer.length==<span class="codeReserved">this</span>._MAX_TRACE_ENTRIES&&<span class="codeReserved">this</span>._traceBuffer.shift(),0===a?<span class="codeReserved">this</span>._traceBuffer.push(arguments[a]):<span class="codeString">&quot;undefined&quot;</span>===<span class="codeReserved">typeof</span> arguments[a]?<span class="codeReserved">this</span>._traceBuffer.push(arguments[a]):<span class="codeReserved">this</span>._traceBuffer.push(<span class="codeString">&quot;  &quot;</span>+JSON.stringify(arguments[a]))}};d.prototype._traceMask=<span class="codeReserved">function</span>(a,b){var c={},d;<span class="codeReserved">for</span>(d <span class="codeReserved">in</span> a)a.hasOwnProperty(d)&&(c[d]=d==b?<span class="codeString">&quot;******&quot;</span>:a[d]);<span class="codeReserved">return</span> c};var G=<span class="codeReserved">function</span>(a,b,c,k){var e;<span class="codeReserved">if</span>(<span class="codeString">&quot;string&quot;</span>!==<span class="codeReserved">typeof</span> a)<span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,</td></tr>
  <tr><td>60</td><td>[<span class="codeReserved">typeof</span> a,<span class="codeString">&quot;host&quot;</span>]));<span class="codeReserved">if</span>(2==arguments.length){k=b;e=a;var g=e.match(<span class="codeString">/^(wss?):\/</span>\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);<span class="codeReserved">if</span>(g)a=g[4]||g[2],b=parseInt(g[7]),c=g[8];<span class="codeReserved">else</span> <span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[a,<span class="codeString">&quot;host&quot;</span>]));}<span class="codeReserved">else</span>{3==arguments.length&&(k=c,c=<span class="codeString">&quot;/mqtt&quot;</span>);<span class="codeReserved">if</span>(<span class="codeString">&quot;number&quot;</span>!==<span class="codeReserved">typeof</span> b||0&gt;b)<span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[<span class="codeReserved">typeof</span> b,<span class="codeString">&quot;port&quot;</span>]));<span class="codeReserved">if</span>(<span class="codeString">&quot;string&quot;</span>!==<span class="codeReserved">typeof</span> c)<span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[<span class="codeReserved">typeof</span> c,<span class="codeString">&quot;path&quot;</span>]));e=<span class="codeString">&quot;ws:&#47;&#47;&quot;</span>+(-1!==a.indexOf(<span class="codeString">&quot;:&quot;</span>)&&<span class="codeString">&quot;[&quot;</span>!==a.slice(0,1)&&<span class="codeString">&quot;]&quot;</span>!==a.slice(-1)?<span class="codeString">&quot;[&quot;</span>+a+<span class="codeString">&quot;]&quot;</span>:a)+<span class="codeString">&quot;:&quot;</span>+b+c}<span class="codeReserved">for</span>(var m=</td></tr>
  <tr><td>61</td><td>g=0;m&lt;<span class="codeReserved">k</span>.length;m++){var n=k.charCodeAt(m);55296&lt;=n&&56319&gt;=n&&m++;g++}<span class="codeReserved">if</span>(<span class="codeString">&quot;string&quot;</span>!==<span class="codeReserved">typeof</span> k||65535&lt;<span class="codeReserved">g</span>)<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[k,<span class="codeString">&quot;clientId&quot;</span>]));var l=<span class="codeReserved">new</span> d(e,a,b,c,k);<span class="codeReserved">this</span>._getHost=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> a};<span class="codeReserved">this</span>._setHost=<span class="codeReserved">function</span>(){<span class="codeReserved">throw</span> Error(f(h.UNSUPPORTED_OPERATION));};<span class="codeReserved">this</span>._getPort=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> b};<span class="codeReserved">this</span>._setPort=<span class="codeReserved">function</span>(){<span class="codeReserved">throw</span> Error(f(h.UNSUPPORTED_OPERATION));};<span class="codeReserved">this</span>._getPath=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> c};<span class="codeReserved">this</span>._setPath=<span class="codeReserved">function</span>(){<span class="codeReserved">throw</span> Error(f(h.UNSUPPORTED_OPERATION));};<span class="codeReserved">this</span>._getURI=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> e};</td></tr>
  <tr><td>62</td><td><span class="codeReserved">this</span>._setURI=<span class="codeReserved">function</span>(){<span class="codeReserved">throw</span> Error(f(h.UNSUPPORTED_OPERATION));};<span class="codeReserved">this</span>._getClientId=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> l.clientId};<span class="codeReserved">this</span>._setClientId=<span class="codeReserved">function</span>(){<span class="codeReserved">throw</span> Error(f(h.UNSUPPORTED_OPERATION));};<span class="codeReserved">this</span>._getOnConnected=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> l.onConnected};<span class="codeReserved">this</span>._setOnConnected=<span class="codeReserved">function</span>(a){<span class="codeReserved">if</span>(<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>===<span class="codeReserved">typeof</span> a)l.onConnected=a;<span class="codeReserved">else</span> <span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[<span class="codeReserved">typeof</span> a,<span class="codeString">&quot;onConnected&quot;</span>]));};<span class="codeReserved">this</span>._getDisconnectedPublishing=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> l.disconnectedPublishing};<span class="codeReserved">this</span>._setDisconnectedPublishing=<span class="codeReserved">function</span>(a){l.disconnectedPublishing=</td></tr>
  <tr><td>63</td><td>a};<span class="codeReserved">this</span>._getDisconnectedBufferSize=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> l.disconnectedBufferSize};<span class="codeReserved">this</span>._setDisconnectedBufferSize=<span class="codeReserved">function</span>(a){l.disconnectedBufferSize=a};<span class="codeReserved">this</span>._getOnConnectionLost=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> l.onConnectionLost};<span class="codeReserved">this</span>._setOnConnectionLost=<span class="codeReserved">function</span>(a){<span class="codeReserved">if</span>(<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>===<span class="codeReserved">typeof</span> a)l.onConnectionLost=a;<span class="codeReserved">else</span> <span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[<span class="codeReserved">typeof</span> a,<span class="codeString">&quot;onConnectionLost&quot;</span>]));};<span class="codeReserved">this</span>._getOnMessageDelivered=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> l.onMessageDelivered};<span class="codeReserved">this</span>._setOnMessageDelivered=<span class="codeReserved">function</span>(a){<span class="codeReserved">if</span>(<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>===<span class="codeReserved">typeof</span> a)l.onMessageDelivered=</td></tr>
  <tr><td>64</td><td>a;<span class="codeReserved">else</span> <span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[<span class="codeReserved">typeof</span> a,<span class="codeString">&quot;onMessageDelivered&quot;</span>]));};<span class="codeReserved">this</span>._getOnMessageArrived=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> l.onMessageArrived};<span class="codeReserved">this</span>._setOnMessageArrived=<span class="codeReserved">function</span>(a){<span class="codeReserved">if</span>(<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>===<span class="codeReserved">typeof</span> a)l.onMessageArrived=a;<span class="codeReserved">else</span> <span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[<span class="codeReserved">typeof</span> a,<span class="codeString">&quot;onMessageArrived&quot;</span>]));};<span class="codeReserved">this</span>._getTrace=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> l.traceFunction};<span class="codeReserved">this</span>._setTrace=<span class="codeReserved">function</span>(a){<span class="codeReserved">if</span>(<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>===<span class="codeReserved">typeof</span> a)l.traceFunction=a;<span class="codeReserved">else</span> <span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[<span class="codeReserved">typeof</span> a,<span class="codeString">&quot;onTrace&quot;</span>]));};<span class="codeReserved">this</span>.connect=<span class="codeReserved">function</span>(a){a=a||{};z(a,</td></tr>
  <tr><td>65</td><td>{timeout:<span class="codeString">&quot;number&quot;</span>,userName:<span class="codeString">&quot;string&quot;</span>,password:<span class="codeString">&quot;string&quot;</span>,willMessage:<span class="codeString">&quot;object&quot;</span>,keepAliveInterval:<span class="codeString">&quot;number&quot;</span>,cleanSession:<span class="codeString">&quot;boolean&quot;</span>,useSSL:<span class="codeString">&quot;boolean&quot;</span>,invocationContext:<span class="codeString">&quot;object&quot;</span>,onSuccess:<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>,onFailure:<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>,hosts:<span class="codeString">&quot;object&quot;</span>,ports:<span class="codeString">&quot;object&quot;</span>,reconnect:<span class="codeString">&quot;boolean&quot;</span>,mqttVersion:<span class="codeString">&quot;number&quot;</span>,mqttVersionExplicit:<span class="codeString">&quot;boolean&quot;</span>,uris:<span class="codeString">&quot;object&quot;</span>});void 0===a.keepAliveInterval&&(a.keepAliveInterval=60);<span class="codeReserved">if</span>(4&lt;<span class="codeReserved">a</span>.mqttVersion||3&gt;a.mqttVersion)<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[a.mqttVersion,<span class="codeString">&quot;connectOptions.mqttVersion&quot;</span>]));void 0===</td></tr>
  <tr><td>66</td><td>a.mqttVersion?(a.mqttVersionExplicit=!1,a.mqttVersion=4):a.mqttVersionExplicit=!0;<span class="codeReserved">if</span>(void 0!==a.password&&void 0===a.userName)<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[a.password,<span class="codeString">&quot;connectOptions.password&quot;</span>]));<span class="codeReserved">if</span>(a.willMessage){<span class="codeReserved">if</span>(!(a.willMessage <span class="codeReserved">instanceof</span> r))<span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[a.willMessage,<span class="codeString">&quot;connectOptions.willMessage&quot;</span>]));a.willMessage.stringPayload=<span class="codeReserved">null</span>;<span class="codeReserved">if</span>(<span class="codeString">&quot;undefined&quot;</span>===<span class="codeReserved">typeof</span> a.willMessage.destinationName)<span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[<span class="codeReserved">typeof</span> a.willMessage.destinationName,<span class="codeString">&quot;connectOptions.willMessage.destinationName&quot;</span>]));</td></tr>
  <tr><td>67</td><td>}<span class="codeString">&quot;undefined&quot;</span>===<span class="codeReserved">typeof</span> a.cleanSession&&(a.cleanSession=!0);<span class="codeReserved">if</span>(a.hosts){<span class="codeReserved">if</span>(!(a.hosts <span class="codeReserved">instanceof</span> Array))<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[a.hosts,<span class="codeString">&quot;connectOptions.hosts&quot;</span>]));<span class="codeReserved">if</span>(1&gt;a.hosts.length)<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[a.hosts,<span class="codeString">&quot;connectOptions.hosts&quot;</span>]));<span class="codeReserved">for</span>(var b=!1,d=0;d&lt;<span class="codeReserved">a</span>.hosts.length;d++){<span class="codeReserved">if</span>(<span class="codeString">&quot;string&quot;</span>!==<span class="codeReserved">typeof</span> a.hosts[d])<span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[<span class="codeReserved">typeof</span> a.hosts[d],<span class="codeString">&quot;connectOptions.hosts[&quot;</span>+d+<span class="codeString">&quot;]&quot;</span>]));<span class="codeReserved">if</span>(<span class="codeString">/^(wss?):\/</span>\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(a.hosts[d]))<span class="codeReserved">if</span>(0===d)b=!0;<span class="codeReserved">else</span>{<span class="codeReserved">if</span>(!b)<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,</td></tr>
  <tr><td>68</td><td>[a.hosts[d],<span class="codeString">&quot;connectOptions.hosts[&quot;</span>+d+<span class="codeString">&quot;]&quot;</span>]));}<span class="codeReserved">else</span> <span class="codeReserved">if</span>(b)<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[a.hosts[d],<span class="codeString">&quot;connectOptions.hosts[&quot;</span>+d+<span class="codeString">&quot;]&quot;</span>]));}<span class="codeReserved">if</span>(b)a.uris=a.hosts;<span class="codeReserved">else</span>{<span class="codeReserved">if</span>(!a.ports)<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[a.ports,<span class="codeString">&quot;connectOptions.ports&quot;</span>]));<span class="codeReserved">if</span>(!(a.ports <span class="codeReserved">instanceof</span> Array))<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[a.ports,<span class="codeString">&quot;connectOptions.ports&quot;</span>]));<span class="codeReserved">if</span>(a.hosts.length!==a.ports.length)<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[a.ports,<span class="codeString">&quot;connectOptions.ports&quot;</span>]));a.uris=[];<span class="codeReserved">for</span>(d=0;d&lt;<span class="codeReserved">a</span>.hosts.length;d++){<span class="codeReserved">if</span>(<span class="codeString">&quot;number&quot;</span>!==<span class="codeReserved">typeof</span> a.ports[d]||</td></tr>
  <tr><td>69</td><td>0&gt;a.ports[d])<span class="codeReserved">throw</span> Error(f(h.INVALID_TYPE,[<span class="codeReserved">typeof</span> a.ports[d],<span class="codeString">&quot;connectOptions.ports[&quot;</span>+d+<span class="codeString">&quot;]&quot;</span>]));var b=a.hosts[d],g=a.ports[d];e=<span class="codeString">&quot;ws:&#47;&#47;&quot;</span>+(-1!==b.indexOf(<span class="codeString">&quot;:&quot;</span>)?<span class="codeString">&quot;[&quot;</span>+b+<span class="codeString">&quot;]&quot;</span>:b)+<span class="codeString">&quot;:&quot;</span>+g+c;a.uris.push(e)}}}l.connect(a)};<span class="codeReserved">this</span>.subscribe=<span class="codeReserved">function</span>(a,b){<span class="codeReserved">if</span>(<span class="codeString">&quot;string&quot;</span>!==<span class="codeReserved">typeof</span> a)<span class="codeReserved">throw</span> Error(<span class="codeString">&quot;Invalid argument:&quot;</span>+a);b=b||{};z(b,{qos:<span class="codeString">&quot;number&quot;</span>,invocationContext:<span class="codeString">&quot;object&quot;</span>,onSuccess:<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>,onFailure:<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>,timeout:<span class="codeString">&quot;number&quot;</span>});<span class="codeReserved">if</span>(b.timeout&&!b.onFailure)<span class="codeReserved">throw</span> Error(<span class="codeString">&quot;subscribeOptions.timeout specified with no onFailure callback.&quot;</span>);</td></tr>
  <tr><td>70</td><td><span class="codeReserved">if</span>(<span class="codeString">&quot;undefined&quot;</span>!==<span class="codeReserved">typeof</span> b.qos&&0!==b.qos&&1!==b.qos&&2!==b.qos)<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[b.qos,<span class="codeString">&quot;subscribeOptions.qos&quot;</span>]));l.subscribe(a,b)};<span class="codeReserved">this</span>.unsubscribe=<span class="codeReserved">function</span>(a,b){<span class="codeReserved">if</span>(<span class="codeString">&quot;string&quot;</span>!==<span class="codeReserved">typeof</span> a)<span class="codeReserved">throw</span> Error(<span class="codeString">&quot;Invalid argument:&quot;</span>+a);b=b||{};z(b,{invocationContext:<span class="codeString">&quot;object&quot;</span>,onSuccess:<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>,onFailure:<span class="codeString">&quot;<span class="codeReserved">function</span>&quot;</span>,timeout:<span class="codeString">&quot;number&quot;</span>});<span class="codeReserved">if</span>(b.timeout&&!b.onFailure)<span class="codeReserved">throw</span> Error(<span class="codeString">&quot;unsubscribeOptions.timeout specified with no onFailure callback.&quot;</span>);l.unsubscribe(a,b)};<span class="codeReserved">this</span>.send=<span class="codeReserved">function</span>(a,b,c,d){var e;<span class="codeReserved">if</span>(0===</td></tr>
  <tr><td>71</td><td>arguments.length)<span class="codeReserved">throw</span> Error(<span class="codeString">&quot;Invalid argument.length&quot;</span>);<span class="codeReserved">if</span>(1==arguments.length){<span class="codeReserved">if</span>(!(a <span class="codeReserved">instanceof</span> r)&&<span class="codeString">&quot;string&quot;</span>!==<span class="codeReserved">typeof</span> a)<span class="codeReserved">throw</span> Error(<span class="codeString">&quot;Invalid argument:&quot;</span>+<span class="codeReserved">typeof</span> a);e=a;<span class="codeReserved">if</span>(<span class="codeString">&quot;undefined&quot;</span>===<span class="codeReserved">typeof</span> e.destinationName)<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[e.destinationName,<span class="codeString">&quot;Message.destinationName&quot;</span>]));}<span class="codeReserved">else</span> e=<span class="codeReserved">new</span> r(b),e.destinationName=a,3&lt;=arguments.length&&(e.qos=c),4&lt;=arguments.length&&(e.retained=d);l.send(e)};<span class="codeReserved">this</span>.publish=<span class="codeReserved">function</span>(a,b,c,d){console.log(<span class="codeString">&quot;Publising message to: &quot;</span>,a);var e;<span class="codeReserved">if</span>(0===arguments.length)<span class="codeReserved">throw</span> Error(<span class="codeString">&quot;Invalid argument.length&quot;</span>);</td></tr>
  <tr><td>72</td><td><span class="codeReserved">if</span>(1==arguments.length){<span class="codeReserved">if</span>(!(a <span class="codeReserved">instanceof</span> r)&&<span class="codeString">&quot;string&quot;</span>!==<span class="codeReserved">typeof</span> a)<span class="codeReserved">throw</span> Error(<span class="codeString">&quot;Invalid argument:&quot;</span>+<span class="codeReserved">typeof</span> a);e=a;<span class="codeReserved">if</span>(<span class="codeString">&quot;undefined&quot;</span>===<span class="codeReserved">typeof</span> e.destinationName)<span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[e.destinationName,<span class="codeString">&quot;Message.destinationName&quot;</span>]));}<span class="codeReserved">else</span> e=<span class="codeReserved">new</span> r(b),e.destinationName=a,3&lt;=arguments.length&&(e.qos=c),4&lt;=arguments.length&&(e.retained=d);l.send(e)};<span class="codeReserved">this</span>.disconnect=<span class="codeReserved">function</span>(){l.disconnect()};<span class="codeReserved">this</span>.getTraceLog=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> l.getTraceLog()};<span class="codeReserved">this</span>.startTrace=<span class="codeReserved">function</span>(){l.startTrace()};<span class="codeReserved">this</span>.stopTrace=</td></tr>
  <tr><td>73</td><td><span class="codeReserved">function</span>(){l.stopTrace()};<span class="codeReserved">this</span>.isConnected=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> l.connected}};G.prototype={get host(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getHost()},set host(a){<span class="codeReserved">this</span>._setHost(a)},get port(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getPort()},set port(a){<span class="codeReserved">this</span>._setPort(a)},get path(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getPath()},set path(a){<span class="codeReserved">this</span>._setPath(a)},get clientId(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getClientId()},set clientId(a){<span class="codeReserved">this</span>._setClientId(a)},get onConnected(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getOnConnected()},set onConnected(a){<span class="codeReserved">this</span>._setOnConnected(a)},get disconnectedPublishing(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getDisconnectedPublishing()},</td></tr>
  <tr><td>74</td><td>set disconnectedPublishing(a){<span class="codeReserved">this</span>._setDisconnectedPublishing(a)},get disconnectedBufferSize(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getDisconnectedBufferSize()},set disconnectedBufferSize(a){<span class="codeReserved">this</span>._setDisconnectedBufferSize(a)},get onConnectionLost(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getOnConnectionLost()},set onConnectionLost(a){<span class="codeReserved">this</span>._setOnConnectionLost(a)},get onMessageDelivered(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getOnMessageDelivered()},set onMessageDelivered(a){<span class="codeReserved">this</span>._setOnMessageDelivered(a)},get onMessageArrived(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getOnMessageArrived()},set onMessageArrived(a){<span class="codeReserved">this</span>._setOnMessageArrived(a)},</td></tr>
  <tr><td>75</td><td>get trace(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getTrace()},set trace(a){<span class="codeReserved">this</span>._setTrace(a)}};var r=<span class="codeReserved">function</span>(a){var b;<span class="codeReserved">if</span>(<span class="codeString">&quot;string&quot;</span>===<span class="codeReserved">typeof</span> a||a <span class="codeReserved">instanceof</span> ArrayBuffer||a <span class="codeReserved">instanceof</span> Int8Array||a <span class="codeReserved">instanceof</span> Uint8Array||a <span class="codeReserved">instanceof</span> Int16Array||a <span class="codeReserved">instanceof</span> Uint16Array||a <span class="codeReserved">instanceof</span> Int32Array||a <span class="codeReserved">instanceof</span> Uint32Array||a <span class="codeReserved">instanceof</span> Float32Array||a <span class="codeReserved">instanceof</span> Float64Array)b=a;<span class="codeReserved">else</span> <span class="codeReserved">throw</span> f(h.INVALID_ARGUMENT,[a,<span class="codeString">&quot;newPayload&quot;</span>]);<span class="codeReserved">this</span>._getPayloadString=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span><span class="codeString">&quot;string&quot;</span>===<span class="codeReserved">typeof</span> b?b:E(b,0,b.length)};<span class="codeReserved">this</span>._getPayloadBytes=</td></tr>
  <tr><td>76</td><td><span class="codeReserved">function</span>(){<span class="codeReserved">if</span>(<span class="codeString">&quot;string&quot;</span>===<span class="codeReserved">typeof</span> b){var a=<span class="codeReserved">new</span> ArrayBuffer(n(b)),a=<span class="codeReserved">new</span> Uint8Array(a);D(b,a,0);<span class="codeReserved">return</span> a}<span class="codeReserved">return</span> b};var c;<span class="codeReserved">this</span>._getDestinationName=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> c};<span class="codeReserved">this</span>._setDestinationName=<span class="codeReserved">function</span>(a){<span class="codeReserved">if</span>(<span class="codeString">&quot;string&quot;</span>===<span class="codeReserved">typeof</span> a)c=a;<span class="codeReserved">else</span> <span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[a,<span class="codeString">&quot;newDestinationName&quot;</span>]));};var d=0;<span class="codeReserved">this</span>._getQos=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> d};<span class="codeReserved">this</span>._setQos=<span class="codeReserved">function</span>(a){<span class="codeReserved">if</span>(0===a||1===a||2===a)d=a;<span class="codeReserved">else</span> <span class="codeReserved">throw</span> Error(<span class="codeString">&quot;Invalid argument:&quot;</span>+a);};var e=!1;<span class="codeReserved">this</span>._getRetained=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> e};<span class="codeReserved">this</span>._setRetained=<span class="codeReserved">function</span>(a){<span class="codeReserved">if</span>(<span class="codeString">&quot;boolean&quot;</span>===</td></tr>
  <tr><td>77</td><td><span class="codeReserved">typeof</span> a)e=a;<span class="codeReserved">else</span> <span class="codeReserved">throw</span> Error(f(h.INVALID_ARGUMENT,[a,<span class="codeString">&quot;newRetained&quot;</span>]));};var g=!1;<span class="codeReserved">this</span>._getDuplicate=<span class="codeReserved">function</span>(){<span class="codeReserved">return</span> g};<span class="codeReserved">this</span>._setDuplicate=<span class="codeReserved">function</span>(a){g=a}};r.prototype={get payloadString(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getPayloadString()},get payloadBytes(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getPayloadBytes()},get destinationName(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getDestinationName()},set destinationName(a){<span class="codeReserved">this</span>._setDestinationName(a)},get topic(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getDestinationName()},set topic(a){<span class="codeReserved">this</span>._setDestinationName(a)},get qos(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getQos()},</td></tr>
  <tr><td>78</td><td>set qos(a){<span class="codeReserved">this</span>._setQos(a)},get retained(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getRetained()},set retained(a){<span class="codeReserved">this</span>._setRetained(a)},get duplicate(){<span class="codeReserved">return</span> <span class="codeReserved">this</span>._getDuplicate()},set duplicate(a){<span class="codeReserved">this</span>._setDuplicate(a)}};<span class="codeReserved">return</span>{Client:G,Message:r}}(window)});</td></tr>
 </tbody>
</table>