<muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span><span
     style="color: #000000;"> </span><span
     style="color: #0000ff;">__DIR__</span><span
     style="color: #000000;"> </span><span
     style="color: #000000;">.</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"/lib/php/autoload.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require</span><span
     style="color: #000000;"> </span><span
     style="color: #0000ff;">__DIR__</span><span
     style="color: #000000;"> </span><span
     style="color: #000000;">.</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">'/vendor/autoload.php'</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"srv/dao/dispositivoBusca.php"</span><span
     style="color: #000000;">;</span></div><br>
  <div><span
     style="color: #0000ff;">use</span><span
     style="color: #000000;"> Ratchet\Server\</span><span
     style="color: #267f99;">IoServer</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #0000ff;">use</span><span
     style="color: #000000;"> Ratchet\Http\</span><span
     style="color: #267f99;">HttpServer</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #0000ff;">use</span><span
     style="color: #000000;"> Ratchet\WebSocket\</span><span
     style="color: #267f99;">WsServer</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #0000ff;">use</span><span
     style="color: #000000;"> srv\</span><span
     style="color: #267f99;">IotWss</span><span
     style="color: #000000;">;</span></div><br>
  <div><span
     style="color: #af00db;">try</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #001080;">$dispositivo</span><span
     style="color: #000000;"> =</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #795e26;">dispositivoBusca</span><span
     style="color: #000000;">(</span><span
     style="color: #a31515;">"1"</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #001080;">$valor</span><span
     style="color: #000000;"> = </span><span
     style="color: #001080;">$dispositivo</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;? </span><span
     style="color: #001080;">$dispositivo</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">valor</span><span
     style="color: #000000;"> : </span><span
     style="color: #a31515;">"0"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #001080;">$server</span><span
     style="color: #000000;"> = </span><span
     style="color: #267f99;">IoServer</span><span
     style="color: #000000;">::</span><span
     style="color: #795e26;">factory</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">new</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">HttpServer</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">new</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">WsServer</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">new</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">IotWss</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$valor</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;),</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #098658;">3000</span></div>
  <div><span
     style="color: #000000;">&nbsp;);</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #001080;">$server</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #795e26;">run</span><span
     style="color: #000000;">();</span></div>
  <div><span
     style="color: #000000;">}&nbsp;</span><span
     style="color: #af00db;">catch</span><span
     style="color: #000000;"> (\</span><span
     style="color: #267f99;">Throwable</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">$e</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #795e26;">echo</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">$e</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #795e26;">getMessage</span><span
     style="color: #000000;">();</span></div>
  <div><span
     style="color: #000000;">}</span></div><br>
 </div>
</muestra-codigo>