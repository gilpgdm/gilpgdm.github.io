<muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;!DOCTYPE</span> <span
     style="color: #e50000;">html</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;html</span> <span
     style="color: #e50000;">lang</span>=<span
     style="color: #0000ff;">"es"</span><span
     style="color: #800000;">&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;head&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">charset</span>=<span
     style="color: #0000ff;">"UTF-8"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;meta</span> <span
     style="color: #e50000;">name</span>=<span
     style="color: #0000ff;">"viewport"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">content</span>=<span
     style="color: #0000ff;">"width=device-width"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;title&gt;</span>Notificaciones Push<span
     style="color: #800000;">&lt;/title&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span><span
     style="color: #000000;"> </span><span
     style="color: #e50000;">type</span><span
     style="color: #000000;">=</span><span
     style="color: #0000ff;">"module"</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #e50000;">src</span><span
     style="color: #000000;">=</span><span
     style="color: #0000ff;">"./lib/js/custom/indicador-cargando.js"</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #800000;">&lt;/script&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;/head&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;body&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;h1&gt;</span>Notificaciones Push<span
     style="color: #800000;">&lt;/h1&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"btnSuscribe"</span> <span
     style="color: #e50000;">hidden</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;Suscríbete</div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"btnCancela"</span> <span
     style="color: #e50000;">hidden</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;Cancela suscripción</div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;button</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"btnNotifica"</span> <span
     style="color: #e50000;">hidden</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;Notifica</div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/button&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;a</span> <span
     style="color: #e50000;">href</span>=<span
     style="color: #0000ff;">"srv/generallaves.php"</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #e50000;">target</span>=<span
     style="color: #0000ff;">"_blank"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;Genera llaves</div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/a&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;p&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;output</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"outEstado"</span><span
     style="color: #800000;">&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;indicador-cargando&gt;</span></div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/indicador-cargando&gt;</span></div>
  <div>&nbsp;&nbsp;<span
     style="color: #800000;">&lt;/output&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;/p&gt;</span></div>
  <div>&nbsp;<span
     style="color: #800000;">&lt;pre</span> <span
     style="color: #e50000;">id</span>=<span
     style="color: #0000ff;">"reporte"</span><span
     style="color: #800000;">&gt;&lt;/pre&gt;</span></div><br>
  <div>&nbsp;<span
     style="color: #800000;">&lt;script</span><span
     style="color: #000000;"> </span><span
     style="color: #e50000;">type</span><span
     style="color: #000000;">=</span><span
     style="color: #0000ff;">"module"</span><span
     style="color: #800000;">&gt;</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">import</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">activaNotificacionesPush</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">from</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"./lib/js/activaNotificacionesPush.js"</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">import</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">SuscripcionEnNavegador</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">from</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"./lib/js/SuscripcionEnNavegador.js"</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">import</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">ejecuta</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">from</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"../lib/js/ejecuta.js"</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">import</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">enviaJson</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">from</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"../lib/js/enviaJson.js"</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">import</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">MetodoHttp</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">from</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"./lib/js/MetodoHttp.js"</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">import</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">muestraError</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">from</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"./lib/js/muestraError.js"</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">import</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">urlBase64ToUint8Array</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">from</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"./lib/js/urlBase64ToUint8Array.js"</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">import</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">SuscripcionEnServidor</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">from</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"./js/SuscripcionEnServidor.js"</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">const</span><span
     style="color: #000000;"> </span><span
     style="color: #0070c1;">applicationServerKey</span><span
     style="color: #000000;"> =</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">urlBase64ToUint8Array</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #a31515;">"BMBlr6YznhYMX3NgcWIDRxZXs0sh7tCv7_YCsWcww0ZCv9WGg-tRCXfMEHTiBPCksSqeve1twlbmVAZFv7GSuj0"</span><span
     style="color: #000000;">)</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #008000;">/**&nbsp;@enum&nbsp;{string}&nbsp;*/</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">const</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;"> =&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">CALCULANDO</span><span
     style="color: #001080;">:</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"Calculando…"</span><span
     style="color: #000000;">,</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">SUSCRITO</span><span
     style="color: #001080;">:</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"Suscrito"</span><span
     style="color: #000000;">,</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">DESUSCRITO</span><span
     style="color: #001080;">:</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"Sin suscripción"</span><span
     style="color: #000000;">,</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">INCOMPATIBLE</span><span
     style="color: #001080;">:</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"Incompatible"</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #795e26;">preparaVista</span><span
     style="color: #000000;">()</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">async</span><span
     style="color: #000000;"> </span><span
     style="color: #0000ff;">function</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">preparaVista</span><span
     style="color: #000000;">()&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">try</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">await</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">activaNotificacionesPush</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #a31515;">"sw.js"</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">const</span><span
     style="color: #000000;"> </span><span
     style="color: #0070c1;">suscripcion</span><span
     style="color: #000000;"> = </span><span
     style="color: #af00db;">await</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">SuscripcionEnNavegador</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">getSuscripcion</span><span
     style="color: #000000;">()</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #000000;"> (</span><span
     style="color: #0070c1;">suscripcion</span><span
     style="color: #000000;"> === </span><span
     style="color: #0000ff;">null</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestra</span><span
     style="color: #000000;">(</span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">DESUSCRITO</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">else</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">await</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">SuscripcionEnServidor</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">modifica</span><span
     style="color: #000000;">(</span><span
     style="color: #0070c1;">suscripcion</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestra</span><span
     style="color: #000000;">(</span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">SUSCRITO</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">escuchaEventos</span><span
     style="color: #000000;">()</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">catch</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">e</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestra</span><span
     style="color: #000000;">(</span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">INCOMPATIBLE</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestraError</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">e</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #008000;">/**&nbsp;@param&nbsp;{Estado}&nbsp;estado */</span>
  </div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">function</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">muestra</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">estado</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">outEstado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">value</span><span
     style="color: #000000;"> = </span><span
     style="color: #001080;">estado</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">estado</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;=== </span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">INCOMPATIBLE</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;|| </span><span
     style="color: #001080;">estado</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;=== </span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">CALCULANDO</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnSuscribe</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #000000;"> = </span><span
     style="color: #0000ff;">true</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnCancela</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #000000;"> = </span><span
     style="color: #0000ff;">true</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnNotifica</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #000000;"> = </span><span
     style="color: #0000ff;">true</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">else</span><span
     style="color: #000000;"> </span><span
     style="color: #af00db;">if</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">estado</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;=== </span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">SUSCRITO</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnSuscribe</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #000000;"> = </span><span
     style="color: #0000ff;">true</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnCancela</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #000000;"> = </span><span
     style="color: #0000ff;">false</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnNotifica</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #000000;"> = </span><span
     style="color: #0000ff;">false</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">else</span><span
     style="color: #000000;"> </span><span
     style="color: #af00db;">if</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">estado</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;=== </span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">DESUSCRITO</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnSuscribe</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #000000;"> = </span><span
     style="color: #0000ff;">false</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnCancela</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #000000;"> = </span><span
     style="color: #0000ff;">true</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnNotifica</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">hidden</span><span
     style="color: #000000;"> = </span><span
     style="color: #0000ff;">true</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">function</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">escuchaEventos</span><span
     style="color: #000000;">()&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnSuscribe</span><span
     style="color: #000000;">.</span><span
     style="color: #795e26;">addEventListener</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #a31515;">"click"</span><span
     style="color: #000000;">, </span><span
     style="color: #795e26;">suscribe</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnCancela</span><span
     style="color: #000000;">.</span><span
     style="color: #795e26;">addEventListener</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #a31515;">"click"</span><span
     style="color: #000000;">, </span><span
     style="color: #795e26;">cancela</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">btnNotifica</span><span
     style="color: #000000;">.</span><span
     style="color: #795e26;">addEventListener</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #a31515;">"click"</span><span
     style="color: #000000;">,</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">notificaDesdeElServidor</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">async</span><span
     style="color: #000000;"> </span><span
     style="color: #0000ff;">function</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">notificaDesdeElServidor</span><span
     style="color: #000000;">()&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">try</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">reporte</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">innerHTML</span><span
     style="color: #000000;"> = </span><span
     style="color: #008000;">/*&nbsp;HTMÑ */</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #a31515;">`&lt;indicador-cargando&gt;</span></div>
  <div><span
     style="color: #a31515;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/indicador-cargando&gt;`</span>
  </div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">const</span><span
     style="color: #000000;"> </span><span
     style="color: #0070c1;">reporteDeEnvios</span><span
     style="color: #000000;"> =</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">await</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #000000;">(</span><span
     style="color: #795e26;">fetch</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #a31515;">"srv/SrvNotifica.php"</span><span
     style="color: #000000;">))</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">reporte</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">textContent</span><span
     style="color: #000000;"> =</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">adaptaReporte</span><span
     style="color: #000000;">(</span><span
     style="color: #0070c1;">reporteDeEnvios</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">catch</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">e</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestraError</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">e</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">function</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">adaptaReporte</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">reporteDeEnvios</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">return</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">JSON</span><span
     style="color: #000000;">.</span><span
     style="color: #795e26;">stringify</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">reporteDeEnvios</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">replace</span><span
     style="color: #000000;">(</span><span
     style="color: #811f3f;">/</span><span
     style="color: #ee0000;">\,</span><span
     style="color: #811f3f;">/</span><span
     style="color: #0000ff;">g</span><span
     style="color: #000000;">, </span><span
     style="color: #a31515;">",</span><span
     style="color: #ee0000;">\n</span><span
     style="color: #a31515;">"</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">async</span><span
     style="color: #000000;"> </span><span
     style="color: #0000ff;">function</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">suscribe</span><span
     style="color: #000000;">()&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">try</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestra</span><span
     style="color: #000000;">(</span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">CALCULANDO</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">const</span><span
     style="color: #000000;"> </span><span
     style="color: #0070c1;">suscripcion</span><span
     style="color: #000000;"> = </span><span
     style="color: #af00db;">await</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">SuscripcionEnNavegador</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">suscribe</span><span
     style="color: #000000;">(</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0070c1;">applicationServerKey</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">await</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">SuscripcionEnServidor</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">agrega</span><span
     style="color: #000000;">(</span><span
     style="color: #0070c1;">suscripcion</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestra</span><span
     style="color: #000000;">(</span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">SUSCRITO</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">catch</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">e</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestraError</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">e</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #0000ff;">async</span><span
     style="color: #000000;"> </span><span
     style="color: #0000ff;">function</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">cancela</span><span
     style="color: #000000;">()&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">try</span><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestra</span><span
     style="color: #000000;">(</span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">CALCULANDO</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">const</span><span
     style="color: #000000;"> </span><span
     style="color: #0070c1;">suscripcion</span><span
     style="color: #000000;"> = </span><span
     style="color: #af00db;">await</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">SuscripcionEnNavegador</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">cancela</span><span
     style="color: #000000;">()</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #000000;"> (</span><span
     style="color: #0070c1;">suscripcion</span><span
     style="color: #000000;"> !== </span><span
     style="color: #0000ff;">null</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">await</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">SuscripcionEnServidor</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.</span><span
     style="color: #795e26;">elimina</span><span
     style="color: #000000;">(</span><span
     style="color: #0070c1;">suscripcion</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestra</span><span
     style="color: #000000;">(</span><span
     style="color: #267f99;">Estado</span><span
     style="color: #000000;">.</span><span
     style="color: #001080;">DESUSCRITO</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">catch</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">e</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">muestraError</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">e</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #800000;">&lt;/script&gt;</span></div>
  <div><span
     style="color: #800000;">&lt;/body&gt;</span></div><br>
  <div><span
     style="color: #800000;">&lt;/html&gt;</span></div>
 </div>
</muestra-codigo>