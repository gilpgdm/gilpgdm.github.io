<muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> .</div>
  <div>&nbsp;<span
     style="color: #a31515;">"/../lib/php/Servicio.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span>&nbsp;&nbsp;<span
     style="color: #0000ff;">__DIR__</span> .</div>
  <div>&nbsp;<span
     style="color: #a31515;">"/../lib/php/leeJson.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> .</div>
  <div>&nbsp;<span
     style="color: #a31515;">"/modelo/Pasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> .</div>
  <div>&nbsp;<span
     style="color: #a31515;">"/modelo/leePasatiempo.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> .</div>
  <div>&nbsp;<span
     style="color: #a31515;">"/dao/pasatiempoAgrega.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> .</div>
  <div>&nbsp;<span
     style="color: #a31515;">"/dao/pasatiempoBusca.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span>&nbsp;&nbsp;<span
     style="color: #0000ff;">__DIR__</span> . <span
     style="color: #811f3f;">"/dao/"</span> .</div>
  <div>&nbsp;<span
     style="color: #a31515;">"pasatiempoConsultaNoEliminados.php"</span>;</div>
  <div><span
     style="color: #af00db;">require_once</span> <span
     style="color: #0000ff;">__DIR__</span> .</div>
  <div>&nbsp;<span
     style="color: #a31515;">"/dao/pasatiempoModifica.php"</span>;</div><br>
  <div><span
     style="color: #0000ff;">class</span> <span
     style="color: #267f99;">SrvSincro</span> <span
     style="color: #0000ff;">extends</span> <span
     style="color: #267f99;">Servicio</span></div>
  <div>{</div>
  <div>&nbsp;<span
     style="color: #0000ff;">protected</span></div>
  <div>&nbsp;<span
     style="color: #0000ff;">function</span> <span
     style="color: #795e26;">implementacion</span>()</div>
  <div>&nbsp;{</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$lista</span> = <span
     style="color: #795e26;">leeJson</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (!<span
     style="color: #795e26;">is_array</span>(<span
     style="color: #001080;">$lista</span>))&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$lista</span> = [];</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">foreach</span> (<span
     style="color: #001080;">$lista</span> as <span
     style="color: #001080;">$objeto</span>)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$modeloEnElCliente</span> =</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">leePasatiempo</span>(<span
     style="color: #001080;">$objeto</span>);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$modeloEnElServidor</span> =</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">pasatiempoBusca</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$modeloEnElCliente</span>-&gt;<span
     style="color: #001080;">uuid</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$modeloEnElServidor</span> === <span
     style="color: #0000ff;">false</span></div>
  <div>&nbsp;&nbsp;&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">/*&nbsp;CONFLICTO. El objeto no ha</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;estado en el
    servidor.</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;AGREGARLO
    solamente si no</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;está
    eliminado. */</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<span
     style="color: #001080;">$modeloEnElCliente</span>-&gt;<span
     style="color: #001080;">eliminado</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">pasatiempoAgrega</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$modeloEnElCliente</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">elseif</span> (</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;!<span
     style="color: #001080;">$modeloEnElServidor</span>-&gt;<span
     style="color: #001080;">eliminado</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$modeloEnElCliente</span>-&gt;<span
     style="color: #001080;">eliminado</span></div>
  <div>&nbsp;&nbsp;&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">/*&nbsp;CONFLICTO. El registro está</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;en el
    servidor, donde no se</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ha eliminado,
    pero ha sido</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;eliminado en
    el cliente.</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gana el
    cliente, porque</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;optamos por no
    revivir lo</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;que se ha
    borrado. */</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">pasatiempoModifica</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$modeloEnElCliente</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;}&nbsp;<span
     style="color: #af00db;">else</span> <span
     style="color: #af00db;">if</span> (</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;!<span
     style="color: #001080;">$modeloEnElCliente</span>-&gt;<span
     style="color: #001080;">eliminado</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;!<span
     style="color: #001080;">$modeloEnElServidor</span>-&gt;<span
     style="color: #001080;">eliminado</span></div>
  <div>&nbsp;&nbsp;&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">/*&nbsp;CONFLICTO. El registro está</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;tanto en el
    servidor como</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;en el cliente.
    Los datos</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;pueden ser
    diferentes.</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;PREVALECE LA
    FECHA MÁS</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;GRANDE. Cuando
    gana el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;servidor no se
    hace nada.*/</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #af00db;">if</span> (</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$modeloEnElCliente</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;<span
     style="color: #001080;">modificacion</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; <span
     style="color: #001080;">$modeloEnElServidor</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;<span
     style="color: #001080;">modificacion</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;{</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #008000;">/*&nbsp;La versión del cliente es</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;más
    nueva y prevalece. */</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">pasatiempoModifica</span>(</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
     style="color: #001080;">$modeloEnElCliente</span></div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</div>
  <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;}</div>
  <div>&nbsp;&nbsp;<span
     style="color: #001080;">$lista</span> =</div>
  <div>&nbsp;&nbsp;&nbsp;<span
     style="color: #795e26;">pasatiempoConsultaNoEliminados</span>();</div>
  <div>&nbsp;&nbsp;<span
     style="color: #af00db;">return</span> <span
     style="color: #001080;">$lista</span>;</div>
  <div>&nbsp;}</div>
  <div>}</div><br>
  <div><span
     style="color: #001080;">$servicio</span> = <span
     style="color: #0000ff;">new</span> <span
     style="color: #267f99;">SrvSincro</span>();</div>
  <div><span
     style="color: #001080;">$servicio</span>-&gt;<span
     style="color: #795e26;">ejecuta</span>();</div><br>
 </div>
</muestra-codigo>