<muestra-codigo>
 <div>
  <div><span
     style="color: #800000;">&lt;?php</span></div><br>
  <div><span
     style="color: #af00db;">require_once</span><span
     style="color: #000000;"> </span><span
     style="color: #0000ff;">__DIR__</span><span
     style="color: #000000;"> </span><span
     style="color: #000000;">.</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"/../lib/php/autoload.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"srv/dao/pasatiempoAgrega.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"srv/dao/pasatiempoBusca.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span><span
     style="color: #000000;"> </span><span
     style="color: #a31515;">"srv/dao/"</span><span
     style="color: #000000;"> </span><span
     style="color: #000000;">.</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"pasatiempoConsultaNoEliminados.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"srv/dao/pasatiempoModifica.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"lib/php/leeJson.php"</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #af00db;">require_once</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #a31515;">"lib/php/copiaCampos.php"</span><span
     style="color: #000000;">;</span></div><br>
  <div><span
     style="color: #0000ff;">use</span><span
     style="color: #000000;"> lib\php\</span><span
     style="color: #267f99;">Servicio</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #0000ff;">use</span><span
     style="color: #000000;"> srv\modelo\</span><span
     style="color: #267f99;">Pasatiempo</span><span
     style="color: #000000;">;</span></div><br>
  <div><span
     style="color: #0000ff;">class</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">SrvSincro</span><span
     style="color: #000000;"> </span><span
     style="color: #0000ff;">extends</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">Servicio</span></div>
  <div><span
     style="color: #000000;">{</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #0000ff;">protected</span></div>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #0000ff;">function</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">implementacion</span><span
     style="color: #000000;">()</span></div>
  <div><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #001080;">$lista</span><span
     style="color: #000000;"> = </span><span
     style="color: #795e26;">leeJson</span><span
     style="color: #000000;">();</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #000000;"> (!</span><span
     style="color: #795e26;">is_array</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$lista</span><span
     style="color: #000000;">))&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">$lista</span><span
     style="color: #000000;"> = [];</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">foreach</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">$lista</span><span
     style="color: #000000;"> as </span><span
     style="color: #001080;">$json</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">$modCli</span><span
     style="color: #000000;"> =</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #0000ff;">$this</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #795e26;">creaPasatiempo</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$json</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">$modServ</span><span
     style="color: #000000;"> =</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">pasatiempoBusca</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$modCli</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">uuid</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #000000;"> (</span><span
     style="color: #001080;">$modServ</span><span
     style="color: #000000;"> === </span><span
     style="color: #0000ff;">false</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #008000;">/*&nbsp;CONFLICTO. El objeto no ha</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;estado en el
    servidor.</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;AGREGARLO
    solamente si no</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;está
    eliminado. */</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #000000;"> (!</span><span
     style="color: #001080;">$modCli</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">eliminado</span><span
     style="color: #000000;">)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">pasatiempoAgrega</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$modCli</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">elseif</span><span
     style="color: #000000;"> (</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;!</span><span
     style="color: #001080;">$modServ</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">eliminado</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; </span><span
     style="color: #001080;">$modCli</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">eliminado</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #008000;">/*&nbsp;CONFLICTO. El registro está</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;en el
    servidor, donde no se</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;ha
    eliminado, pero ha sido</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;eliminado
    en el cliente.</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gana el
    cliente, porque</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;optamos
    por no revivir lo</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;que se
    ha borrado. */</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">pasatiempoModifica</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$modCli</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}&nbsp;</span><span
     style="color: #af00db;">else</span><span
     style="color: #000000;"> </span><span
     style="color: #af00db;">if</span><span
     style="color: #000000;"> (</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;!</span><span
     style="color: #001080;">$modCli</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">eliminado</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; !</span><span
     style="color: #001080;">$modServ</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">eliminado</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #008000;">/*&nbsp;CONFLICTO. El registro está</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;tanto en
    el servidor como</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;en el
    cliente. Los datos</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;pueden
    ser diferentes.</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;PREVALECE
    LA FECHA MÁS</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;GRANDE.
    Cuando gana el</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;servidor
    no se hace nada.*/</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #af00db;">if</span><span
     style="color: #000000;"> (</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #001080;">$modCli</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">modificacion</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt; </span><span
     style="color: #001080;">$modServ</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #001080;">modificacion</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #008000;">/*&nbsp;La versión del cliente es</span></div>
  <div><span
     style="color: #008000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;más
    nueva y prevalece. */</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">pasatiempoModifica</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$modCli</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;}</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #001080;">$lista</span><span
     style="color: #000000;"> =</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;&nbsp;</span><span
     style="color: #795e26;">pasatiempoConsultaNoEliminados</span><span
     style="color: #000000;">();</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">return</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">$lista</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #000000;">&nbsp;}</span></div><br>
  <div><span
     style="color: #000000;">&nbsp;</span><span
     style="color: #0000ff;">function</span><span
     style="color: #000000;"> </span><span
     style="color: #795e26;">creaPasatiempo</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$json</span><span
     style="color: #000000;">)</span></div>
  <div><span
     style="color: #000000;">&nbsp;{</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #001080;">$pasatiempo</span><span
     style="color: #000000;"> = </span><span
     style="color: #0000ff;">new</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">Pasatiempo</span><span
     style="color: #000000;">();</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #795e26;">copiaCampos</span><span
     style="color: #000000;">(</span><span
     style="color: #001080;">$pasatiempo</span><span
     style="color: #000000;">, </span><span
     style="color: #001080;">$json</span><span
     style="color: #000000;">);</span></div>
  <div><span
     style="color: #000000;">&nbsp;&nbsp;</span><span
     style="color: #af00db;">return</span><span
     style="color: #000000;"> </span><span
     style="color: #001080;">$pasatiempo</span><span
     style="color: #000000;">;</span></div>
  <div><span
     style="color: #000000;">&nbsp;}</span></div>
  <div><span
     style="color: #000000;">}</span></div><br>
  <div><span
     style="color: #001080;">$servicio</span><span
     style="color: #000000;"> = </span><span
     style="color: #0000ff;">new</span><span
     style="color: #000000;"> </span><span
     style="color: #267f99;">SrvSincro</span><span
     style="color: #000000;">();</span></div>
  <div><span
     style="color: #001080;">$servicio</span><span
     style="color: #000000;">-&gt;</span><span
     style="color: #795e26;">ejecuta</span><span
     style="color: #000000;">();</span></div><br>
 </div>
</muestra-codigo>